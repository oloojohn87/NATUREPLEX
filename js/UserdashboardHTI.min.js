$(document).ready(function(){alert("in userdashboardhti.js"),$("#VerifyDoctor").live("click",function(){$("#Talk_hti").trigger("click")}),$("#Talk_hti").live("click",function(){doctor_to_connect="",type_of_doctor_to_find="",$(".recent_doctor_button_selected").attr("class","recent_doctor_button"),$("#Talk_Section_1").css("display","block"),$("#Talk_Section_2").css("display","none"),$("#Talk_Section_3").css("display","none"),$("#Talk_Section_4").css("display","none"),$("#find_doctor_modal").dialog({bgiframe:!0,width:550,height:413,resize:!1,modal:!0}),$("#step_bar_1").attr("class","step_bar"),$("#step_circle_1").attr("class","step_circle lit"),$("#step_circle_2").attr("class","step_circle"),$("#step_bar_2").attr("class","step_bar"),$("#step_circle_3").attr("class","step_circle"),$("#step_bar_3").attr("class","step_bar"),$("#step_circle_4").attr("class","step_circle"),$("#step_bar_4").attr("class","step_bar"),$("#step_circle_5").attr("class","step_circle"),$("#step_bar_5").attr("class","step_bar"),$("#step_circle_6").attr("class","step_circle"),$("#find_doctor_label").text(""),$("#find_doctor_next_button_hti").css("display","block"),$("#find_doctor_previous_button_hti").css("display","block"),$("#find_doctor_cancel_button").css("display","block"),$("#find_doctor_close_button").css("display","none"),$("#find_doctor_my_doctors_1").css("display","none"),$("#find_doctor_my_doctors_2").css("display","none"),$("#find_doctor_appointment_1").css("display","none"),$("#find_doctor_appointment_2").css("display","none"),$("#find_doctor_appointment_3").css("display","none"),$("#find_doctor_time").css("display","none"),$("#find_doctor_receipt").css("display","none"),$("#find_doctor_confirmation").css("display","none"),$("#time_selector_1").css("display","none"),$("#day_selector_1").css("display","none"),$("#find_doctor_main").css("display","block"),find_doctor_page=0}),$("#find_doctor_next_button_hti").live("click",function(){if(alert("#find_doctor_next_button_hti"),30==find_doctor_page||21==find_doctor_page||10==find_doctor_page){if($("#step_bar_1").attr("class","step_bar lit"),$("#step_circle_1").attr("class","step_circle lit"),$("#step_circle_2").attr("class","step_circle lit"),$("#step_bar_2").attr("class","step_bar lit"),$("#step_circle_3").attr("class","step_circle lit"),$("#step_bar_3").attr("class","step_bar lit"),$("#step_circle_4").attr("class","step_circle lit"),$("#find_doctor_label").text("Select Time"),30==find_doctor_page||10==find_doctor_page)if(10==find_doctor_page||30==find_doctor_page){var e="General Practice";10!=find_doctor_page&&30!=find_doctor_page&&null!=$("#speciality").val()&&(e=$("#speciality").val());var t=$("#country").val(),a="";$("#state").val().length>0&&"-1"!=$("#state").val()&&(a=$("#state").val()+", "+$("#country").val());var i=!0;31==find_doctor_page&&(i=!1),$.post("find_doctor.php",{type:e,location_1:t,location_2:a,must_be_available:i},function(e){if("none"!=e){var a=JSON.parse(e);selected_doctor_info="recdoc_"+a.id+"_"+a.phone+"_"+a.name+"_"+a.location,console.log(selected_doctor_info),$.post("getDoctorAvailableTimeranges.php",{id:a.id},function(e){console.log(e);for(var a=JSON.parse(e),i=0;7>i;i++)0==a.slots[i].length?($("#"+getDayStr(i)).addClass("day_disabled"),$("#"+getDayStr(i)).children("input").eq(1).val("[]"),$("#"+getDayStr(i)).children("input").eq(2).val("")):($("#"+getDayStr(i)).removeClass("day_disabled"),$("#"+getDayStr(i)).children("input").eq(1).val("["+a.slots[i].toString()+"]"),$("#"+getDayStr(i)).children("input").eq(2).val("["+a.zones[i].toString()+"]"));if(30==find_doctor_page)find_doctor_page=32,resetDateTimeSelector(),$("#find_doctor_appointment_1").fadeOut(300,function(){$("#find_doctor_time").fadeIn(300)});else{find_doctor_page=12;var a=selected_doctor_info.split("_"),s='<ul style="color: #22AEFF; margin-top: 50px; margin-left: 120px;"><li style="text-align: left;">Receipt: <strong>HTI - CR102388</strong></li><li style="text-align: left;"><strong>';s+=1==consultation_type?"Video ":"Phone ",s+='Consultation</strong></li><li style="text-align: left;">With Dr. <strong>'+a[3]+" "+a[4]+'</strong></li><li style="text-align: left;">starting <strong>NOW</strong></li></ul></div>',$("#find_doctor_receipt").html(s),$("#find_doctor_confirmation").html('<p style="color: #22AEFF; margin-top: 50px;"><strong>Thank you!</strong><br/><strong>Your consultation appointment is confirmed and will start IMMEDIATELY.</strong></p></div>'),$("#find_doctor_appointment_1").fadeOut(300,function(){$("#find_doctor_receipt").fadeIn(300)}),$("#step_bar_4").attr("class","step_bar lit"),$("#step_circle_5").attr("class","step_circle lit"),$("#find_doctor_label").text("Confirmation")}})}else find_doctor_page=31==find_doctor_page?35:15,$("#find_doctor_next_button_hti").css("display","none"),"th"==language?translation="Lo siento, no hemos podido encontrar ningún</br>médico general en tu area.":"en"==language&&(translation="Sorry, we could not find any<br/>general practicioners in your area."),$("#not_found_text").html(translation),$("#find_doctor_appointment_1").fadeOut(300,function(){$("#find_doctor_appointment_3").fadeIn(300)}),$("#step_bar_3").attr("class","step_bar"),$("#step_circle_4").attr("class","step_circle"),"th"==language?translation="Seleccionar Especialidad":"en"==language&&(translation="Select Speciality"),$("#find_doctor_label").text(translation)})}else $("#step_bar_3").attr("class","step_bar"),$("#step_circle_4").attr("class","step_circle"),"th"==language?translation="Seleccionar Especialidad":"en"==language&&(translation="Select Speciality"),$("#find_doctor_label").text(translation);21==find_doctor_page&&(0==selected_doctor_available?$("#in_location_checkbox").is(":checked")?(find_doctor_page=22,resetDateTimeSelector(),$("#find_doctor_my_doctors_2").fadeOut(300,function(){$("#find_doctor_time").fadeIn(300)})):($("#step_bar_3").attr("class","step_bar"),$("#step_circle_4").attr("class","step_circle"),"th"==language?translation="Seleccionar Tipo":"en"==language&&(translation="Select Type"),$("#find_doctor_label").text(translation)):$("#in_location_checkbox").is(":checked")?(find_doctor_page=25,$("#find_doctor_my_doctors_2").fadeOut(300,function(){$("#find_doctor_my_doctors_3").fadeIn(300)})):($("#step_bar_3").attr("class","step_bar"),$("#step_circle_4").attr("class","step_circle"),"th"==language?translation="Seleccionar Tipo":"en"==language&&(translation="Select Type"),$("#find_doctor_label").text(translation)))}else if(32==find_doctor_page||22==find_doctor_page)if($("#step_bar_1").attr("class","step_bar lit"),$("#step_circle_1").attr("class","step_circle lit"),$("#step_circle_2").attr("class","step_circle lit"),$("#step_bar_2").attr("class","step_bar lit"),$("#step_circle_3").attr("class","step_circle lit"),$("#step_bar_3").attr("class","step_bar lit"),$("#step_circle_4").attr("class","step_circle lit"),$("#step_bar_4").attr("class","step_bar lit"),$("#step_circle_5").attr("class","step_circle lit"),$("#find_doctor_label").text("Confirmation"),32==find_doctor_page){var s=selected_doctor_info.split("_"),o='<ul style="color: #22AEFF; margin-top: 50px; margin-left: 120px;"><li style="text-align: left;">Receipt: <strong>HTI - CR102388</strong></li><li style="text-align: left;"><strong>';o+=1==consultation_type?"Video ":"Phone ",o+='Consultation</strong></li><li style="text-align: left;">With Dr. <strong>'+s[3]+" "+s[4]+'</strong></li><li style="text-align: left;">next <strong>'+getDay(day_selected)+"</strong> between <strong>"+getSlot(time_selected)+"</strong></li></ul></div>",$("#find_doctor_receipt").html(o),$("#find_doctor_confirmation").html('<p style="color: #22AEFF; margin-top: 50px;"><strong>Thank you!</strong><br/><strong>Your consultation appointment is confirmed.</strong><br/>Please be ready at the selected day and time, and follow the instructions that we sent to you</p></div>'),find_doctor_page=33,$("#find_doctor_time").fadeOut(300,function(){$("#find_doctor_receipt").fadeIn(300)})}else if(22==find_doctor_page&&-1!=time_selected&&-1!=day_selected){find_doctor_page=23;var s=selected_doctor_info.split("_"),o='<ul style="color: #22AEFF; margin-top: 50px; margin-left: 120px;"><li style="text-align: left;">Receipt: <strong>HTI - CR102388</strong></li><li style="text-align: left;"><strong>';o+=1==consultation_type?"Video ":"Phone ",o+='Consultation</strong></li><li style="text-align: left;">With Dr. <strong>'+s[3]+" "+s[4]+'</strong></li><li style="text-align: left;">next <strong>'+getDay(day_selected)+"</strong> between <strong>"+getSlot(time_selected)+"</strong></li></ul></div>",$("#find_doctor_receipt").html(o),$("#find_doctor_confirmation").html('<p style="color: #22AEFF; margin-top: 50px;"><strong>Thank you!</strong><br/><strong>Your consultation appointment is confirmed.</strong><br/>Please be ready at the selected day and time, and follow the instructions that we sent to you</p></div>'),$("#find_doctor_time").fadeOut(300,function(){$("#find_doctor_receipt").fadeIn(300)})}else $("#step_bar_4").attr("class","step_bar"),$("#step_circle_5").attr("class","step_circle"),$("#find_doctor_label").text("Select Time");else if(33==find_doctor_page||23==find_doctor_page||26==find_doctor_page||12==find_doctor_page){if(33==find_doctor_page){find_doctor_page=34;var s=selected_doctor_info.split("_");console.log(date_selected);var l=1;1!=consultation_type&&(l=0),$.post("add_appointment.php",{medid:s[1],patid:$("#USERID").val(),date:date_selected,start_time:getSlotStartTime(time_selected),end_time:getSlotEndTime(time_selected),video:l,timezone:selected_timezone},function(e){"-1"!=e&&$.get("send_appointment_email.php?id="+e+"&type=patient",function(e){$.get("send_appointment_email.php?id="+e+"&type=doctor",function(){})})})}if(23==find_doctor_page){find_doctor_page=24;var s=selected_doctor_info.split("_");console.log(date_selected);var l=1;1!=consultation_type&&(l=0),$.post("add_appointment.php",{medid:s[1],patid:$("#USERID").val(),date:date_selected,start_time:getSlotStartTime(time_selected),end_time:getSlotEndTime(time_selected),video:l,timezone:selected_timezone},function(e){"-1"!=e&&$.get("send_appointment_email.php?id="+e+"&type=patient",function(e){$.get("send_appointment_email.php?id="+e+"&type=doctor",function(){})})})}if(26==find_doctor_page||12==find_doctor_page){find_doctor_page=26==find_doctor_page?27:13;var s=selected_doctor_info.split("_");$.post("start_telemed_phonecall.php",{pat_phone:$("#USERPHONE").val(),doc_phone:s[2],doc_id:s[1],pat_id:$("#USERID").val(),doc_name:s[3]+" "+s[4],pat_name:$("#USERNAME").val()+" "+$("#USERSURNAME").val()},function(e){console.log(e)})}$("#find_doctor_receipt").fadeOut(300,function(){$("#find_doctor_confirmation").fadeIn(300)}),$("#step_bar_1").attr("class","step_bar lit"),$("#step_circle_1").attr("class","step_circle lit"),$("#step_circle_2").attr("class","step_circle lit"),$("#step_bar_2").attr("class","step_bar lit"),$("#step_circle_3").attr("class","step_circle lit"),$("#step_bar_3").attr("class","step_bar lit"),$("#step_circle_4").attr("class","step_circle lit"),$("#step_bar_4").attr("class","step_bar lit"),$("#step_circle_5").attr("class","step_circle lit"),$("#step_bar_5").attr("class","step_bar lit"),$("#step_circle_6").attr("class","step_circle lit"),$("#find_doctor_label").text(""),$("#find_doctor_next_button_hti").css("display","none"),$("#find_doctor_previous_button_hti").css("display","none"),$("#find_doctor_cancel_button").css("display","none"),$("#find_doctor_close_button").css("display","block")}}),$("#find_doctor_previous_button_hti").live("click",function(){alert("#find_doctor_previous_button_hti"),23==find_doctor_page||33==find_doctor_page?(23==find_doctor_page?find_doctor_page=22:33==find_doctor_page&&(find_doctor_page=32),resetDateTimeSelector(),$("#find_doctor_receipt").fadeOut(300,function(){$("#find_doctor_time").fadeIn(300)}),$("#step_bar_1").attr("class","step_bar lit"),$("#step_circle_1").attr("class","step_circle lit"),$("#step_circle_2").attr("class","step_circle lit"),$("#step_bar_2").attr("class","step_bar lit"),$("#step_circle_3").attr("class","step_circle lit"),$("#step_bar_3").attr("class","step_bar lit"),$("#step_circle_4").attr("class","step_circle lit"),$("#step_bar_4").attr("class","step_bar"),$("#step_circle_5").attr("class","step_circle"),$("#find_doctor_label").text("Select Time")):22==find_doctor_page||32==find_doctor_page||12==find_doctor_page?($("#step_bar_1").attr("class","step_bar lit"),$("#step_circle_1").attr("class","step_circle lit"),$("#step_circle_2").attr("class","step_circle lit"),$("#step_bar_2").attr("class","step_bar lit"),$("#step_circle_3").attr("class","step_circle lit"),$("#step_bar_3").attr("class","step_bar"),$("#step_circle_4").attr("class","step_circle"),$("#step_bar_4").attr("class","step_bar"),$("#step_circle_5").attr("class","step_circle"),"th"==language?translation="Seleccionar Tipo":"en"==language&&(translation="Select Type"),$("#find_doctor_label").text(translation),22==find_doctor_page?0==selected_doctor_available?(find_doctor_page=21,$("#find_doctor_time").fadeOut(300,function(){$("#find_doctor_my_doctors_2").fadeIn(300)})):(find_doctor_page=25,$("#find_doctor_time").fadeOut(300,function(){$("#find_doctor_my_doctors_3").fadeIn(300)}),$("#find_doctor_label").text("Select Time"),$("#step_bar_3").attr("class","step_bar lit"),$("#step_circle_4").attr("class","step_circle lit")):(32==find_doctor_page||12==find_doctor_page)&&(32==find_doctor_page?(find_doctor_page=30,$("#find_doctor_time").fadeOut(300,function(){$("#find_doctor_appointment_1").fadeIn(300)}),"th"==language?translation="Seleccionar Tipo":"en"==language&&(translation="Select Type"),$("#find_doctor_label").text(translation),$("#step_bar_2").attr("class","step_bar"),$("#step_circle_3").attr("class","step_circle")):(find_doctor_page=10,$("#find_doctor_receipt").fadeOut(300,function(){$("#find_doctor_appointment_1").fadeIn(300)}),"th"==language?translation="Seleccionar Tipo":"en"==language&&(translation="Select Type"),$("#find_doctor_label").text(translation),$("#step_bar_2").attr("class","step_bar"),$("#step_circle_3").attr("class","step_circle")))):21==find_doctor_page||31==find_doctor_page||11==find_doctor_page?(21==find_doctor_page?($("#find_doctor_my_doctors_2").fadeOut(300,function(){$("#find_doctor_my_doctors_1").fadeIn(300)}),find_doctor_page=20,$("#find_doctor_label").text("Select Doctor")):31==find_doctor_page?(find_doctor_page=30,$("#find_doctor_appointment_2").fadeOut(300,function(){$("#find_doctor_appointment_1").fadeIn(300)}),"th"==language?translation="Seleccionar Tipo":"en"==language&&(translation="Select Type"),$("#find_doctor_label").text(translation)):(find_doctor_page=10,$("#find_doctor_appointment_2").fadeOut(300,function(){$("#find_doctor_appointment_1").fadeIn(300)}),"th"==language?translation="Seleccionar Tipo":"en"==language&&(translation="Select Type"),$("#find_doctor_label").text(translation)),$("#step_bar_1").attr("class","step_bar lit"),$("#step_circle_1").attr("class","step_circle lit"),$("#step_circle_2").attr("class","step_circle lit"),$("#step_bar_2").attr("class","step_bar"),$("#step_circle_3").attr("class","step_circle"),$("#step_bar_3").attr("class","step_bar"),$("#step_circle_4").attr("class","step_circle"),$("#step_bar_4").attr("class","step_bar"),$("#step_circle_5").attr("class","step_circle")):20==find_doctor_page||30==find_doctor_page||10==find_doctor_page?(20==find_doctor_page?$("#find_doctor_my_doctors_1").fadeOut(300,function(){$("#find_doctor_main").fadeIn(300)}):(30==find_doctor_page||10==find_doctor_page)&&$("#find_doctor_appointment_1").fadeOut(300,function(){$("#find_doctor_main").fadeIn(300)}),find_doctor_page=0,$("#step_bar_1").attr("class","step_bar"),$("#step_circle_1").attr("class","step_circle lit"),$("#step_circle_2").attr("class","step_circle"),$("#step_bar_2").attr("class","step_bar"),$("#step_circle_3").attr("class","step_circle"),$("#step_bar_3").attr("class","step_bar"),$("#step_circle_4").attr("class","step_circle"),$("#step_bar_4").attr("class","step_bar"),$("#step_circle_5").attr("class","step_circle"),$("#find_doctor_label").text("")):25==find_doctor_page?($("#find_doctor_my_doctors_3").fadeOut(300,function(){$("#find_doctor_my_doctors_2").fadeIn(300)}),find_doctor_page=21,$("#step_bar_1").attr("class","step_bar lit"),$("#step_circle_1").attr("class","step_circle lit"),$("#step_circle_2").attr("class","step_circle lit"),$("#step_bar_2").attr("class","step_bar lit"),$("#step_circle_3").attr("class","step_circle lit"),$("#step_bar_3").attr("class","step_bar"),$("#step_circle_4").attr("class","step_circle"),$("#step_bar_4").attr("class","step_bar"),$("#step_circle_5").attr("class","step_circle"),"th"==language?translation="Seleccionar Tipo":"en"==language&&(translation="Select Type"),$("#find_doctor_label").text(translation)):26==find_doctor_page?($("#find_doctor_receipt").fadeOut(300,function(){$("#find_doctor_my_doctors_3").fadeIn(300)}),find_doctor_page=25,$("#step_bar_1").attr("class","step_bar lit"),$("#step_circle_1").attr("class","step_circle lit"),$("#step_circle_2").attr("class","step_circle lit"),$("#step_bar_2").attr("class","step_bar lit"),$("#step_circle_3").attr("class","step_circle lit"),$("#step_bar_3").attr("class","step_bar lit"),$("#step_circle_4").attr("class","step_circle lit"),$("#step_bar_4").attr("class","step_bar"),$("#step_circle_5").attr("class","step_circle"),$("#find_doctor_label").text("Select Time")):35==find_doctor_page?($("#find_doctor_appointment_3").fadeOut(300,function(){$("#find_doctor_appointment_2").fadeIn(300)}),find_doctor_page=31,$("#find_doctor_next_button_hti").css("display","block")):15==find_doctor_page&&($("#find_doctor_appointment_3").fadeOut(300,function(){$("#find_doctor_appointment_1").fadeIn(300)}),find_doctor_page=10,$("#find_doctor_next_button_hti").css("display","block"))})});