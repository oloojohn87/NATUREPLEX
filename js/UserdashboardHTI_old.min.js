$(document).ready(function(){function get_userdashboard_data(){url=domain+"/get_userdashboard_data.php";var e=LanzaAjax(url);return data=e.split(";")}function LanzaAjax(e){var t="SIN MODIFICACIÓN";return $.ajax({url:e,dataType:"html",async:!1,complete:function(){},success:function(e){"string"==typeof e&&(t=e)}}),t}function get_domain(){url="../sessions.php?domain=";var e=LanzaAjax(url);return e}function get_session_variable(e){url=domain+"/sessions.php?session_var="+e;var t=LanzaAjax(url);return t}function inform_about_session(){$.ajax({url:domain+"/ongoing_sessions.php?userid="+session_medid,success:function(){}}),clearTimeout(sessionTimer),sessionTimer=setTimeout(inform_about_session,active_session_timer)}function ShowTimeOutWarning(){alert("Session expired");window.location="timeout.php"}function displaynotification(e,t){var a={title:e,text:t,image:"images/Icono_H2M.png",sticky:!1,time:"3000"};$.gritter.add(a)}function getUserData(){var t=domain+"/GetUserData.php?UserId="+session_userid;$.ajax({url:t,dataType:"json",async:!1,success:function(e){user=e.items}})}function getMedCreator(){var t=domain+"/GetMedCreator.php?UserId="+session_userid;$.ajax({url:t,dataType:"json",async:!1,success:function(e){doctor=e.items}})}function LoadDonuts(){var e=session_userid,t=0,a="GetSummaryData.php?User="+e;$.ajax({url:a,dataType:"json",async:!1,success:function(e){ConnData=e.items}}),t=ConnData[0].Data,PastDx=ConnData[1].Data,Medications=ConnData[2].Data,Allergies=ConnData[3].Data,Family=ConnData[4].Data,Habits=ConnData[5].Data;var s=document.getElementById("myCanvas"),i=s.getContext("2d"),l=s.width/2,o=s.height/2,n=75,r=0-Math.PI/2,c=!1,_=new Array,d=new Array,p=new Array,f=new Array,u=new Array,g=new Array,m=new Array;_[1]="#54bc00",f[1]=5,u[1]=10,d[1]=t>f[1]?u[1]:t*u[1]/f[1],p[1]="Admin",g[1]="Admin",m[1]="Data",_[2]="#f39c12",u[2]=10,d[2]=Allergies>0?10:0,p[2]="Immuno",g[2]="Immun",m[2]="Allergy",_[3]="#2c3e50",f[3]=5,u[3]=40,d[3]=PastDx>0?40:0,p[3]="History",g[3]="Perso",m[3]="History",_[4]="#18bc9c",d[4]=15,u[4]=15,d[4]=Medications>0?15:0,p[4]="Medication",g[4]="Drugs",m[4]="Meds",_[5]="#e74c3c",d[5]=15,u[5]=15,d[5]=Family>0?15:0,p[5]="Family",g[5]="Family",m[5]="History",_[6]="#3498db",d[6]=10,u[6]=10,d[6]=Habits>0?10:0,p[6]="Habits",g[6]="Habits",m[6]="Life";var v=new Array,b=0,h=0,y=1,k=(new Array,0),T=0,I=new Array,D=1,w=0,A=Array();for(r=0-Math.PI/2;7>D;)endAngle=r+TranslateAngle(d[D],100),midAngle=r+TranslateAngle(d[D]/2,100),A[D]=midAngle,halfsegment=d[D]/2,w+=d[D],50>w-halfsegment?(v[D]="Right",b++):(v[D]="Left",h++),r=endAngle,M=endAngle,D++;console.log("Right:"+b+"    Left:"+h);var E=0;i.lineWidth=35,r=0-Math.PI/2;for(var M=0,O=1,D=1,R=0;7>D;){E+=d[D],i.beginPath(),ColorRGB=hexToRgb(_[D]);var P=Math.random(),P=1;SegColor="rgba("+ColorRGB.r+","+ColorRGB.g+","+ColorRGB.b+","+P+")",i.beginPath(),i.strokeStyle=SegColor,i.lineCap="butt",endAngle=r+TranslateAngle(d[D],100),midAngle=r+TranslateAngle(d[D]/2,100),A[D]=midAngle,i.lineWidth=35,i.arc(l,o,n,r,endAngle,c),i.stroke();var q=l+n*Math.cos(midAngle)-12,U=o+n*Math.sin(midAngle)-12,z=l+(n+17.5)*Math.cos(midAngle),F=o+(n+17.5)*Math.sin(midAngle),N=document.getElementById(p[D]);d[D]>4&&i.drawImage(N,q,U,25,25),y=b>=D?D:D-b,"Left"==v[D]?(R++,k=10,O=2*o/(h+1),I[D]=6-(D-h+1),I[D]=D,z=l+(n+17.5)*Math.cos(A[I[D]]),F=o+(n+17.5)*Math.sin(A[I[D]]),T=2*o-O*R):(k=l-n/2+20,k=280,O=2*o/(b+1),T=O*y,I[D]=D,VerticalDiff=T-F,console.log("Diff: "+VerticalDiff+"     YBox: "+T+"     bory:"+F),Math.abs(VerticalDiff)>40&&(T-=VerticalDiff/2)),i.font="10px Arial",i.fillStyle="#b6b6b6",i.fillText(g[I[D]],k,T+8),i.fillText(m[I[D]],k,T+8+10),i.beginPath(),i.lineWidth=3,i.strokeStyle=_[I[D]],i.lineCap="round",i.moveTo(k+35,T),i.lineTo(k+35,T+20),i.stroke(),i.font="bold 12px Arial",i.fillStyle="grey",percentSeg=parseInt(100*(d[I[D]]/u[I[D]])),labelSeg=100==percentSeg?"OK":percentSeg+"%",i.fillText(labelSeg,k+40,T+3+10),i.beginPath(),i.strokeStyle="#cacaca",i.lineWidth=2,"Left"==v[D]?(X1=k+40+30,XMiddle=z-(z-X1)/2):(X1=k-5,XMiddle=X1-(X1-z)/2),Y1=T+3+10-5,YMiddle=F+(Y1-F)/2,YMiddle=F,i.moveTo(X1,Y1),i.bezierCurveTo(XMiddle,YMiddle,XMiddle,YMiddle,z,F),i.stroke(),i.lineCap="butt",r=endAngle,M=endAngle,D++}i.beginPath(),i.fillStyle="#22aeff",i.lineWidth=1,i.arc(l,o,n-20,-Math.PI/2,2*Math.PI,c),i.fill(),i.stroke(),i.lineWidth=35;var L="30pt Lucida Sans Unicode",B=E+" %";i.fillStyle="#22aeff",i.fillStyle="white",i.textAlign="left",i.textBaseline="top",i.font=L;var W=i.measureText(B).width,H=GetCanvasTextHeight(B,L);i.fillText(B,l-W/2,o-H),i.beginPath(),ColorRGB=hexToRgb("#C0C0C0");var P=.2;SegColor="rgba("+ColorRGB.r+","+ColorRGB.g+","+ColorRGB.b+","+P+")",i.strokeStyle=SegColor;var V=100-E;endAngle=r+TranslateAngle(V,100),midAngle=r+TranslateAngle(V/2,100),i.lineWidth=35,i.arc(l,o,n,r,endAngle,c),i.stroke(),i.beginPath(),r=0-Math.PI/2,endAngle=M,i.strokeStyle="#585858",i.lineWidth=2,i.arc(l,o,n+17,r,endAngle,c),i.stroke(),i.beginPath(),i.arc(l,o,n-17,r,endAngle,c),i.stroke(),i.beginPath();var q=l+(n-18)*Math.cos(r),U=o+(n-18)*Math.sin(r),j=l+(n+18)*Math.cos(r),Y=o+(n+18)*Math.sin(r);i.moveTo(q,U),i.lineTo(j,Y);var q=l+(n-18)*Math.cos(M),U=o+(n-18)*Math.sin(M),j=l+(n+18)*Math.cos(M),Y=o+(n+18)*Math.sin(M);i.moveTo(q,U),i.lineTo(j,Y),i.stroke();var G=Array(),a="GetReportSet.php";$.ajax({url:a,dataType:"json",async:!1,success:function(e){G=e.items},error:function(e,t,a){alert(e.status),alert(a)}});var X=Array(),a="GetReportNumbers.php?User="+e;$.ajax({url:a,dataType:"json",async:!1,success:function(e){X=e.items},error:function(e,t,a){alert(e.status),alert(a)}});var s=document.getElementById("myCanvas2"),i=s.getContext("2d"),l=s.width/2,o=s.height/2,n=85,J=15,r=0-Math.PI/2,c=!1;_.length=0,d.length=0,p.length=0;for(var Q=1,K=0;10>Q;)_[Q]=G[Q-1].color,d[Q]=X[Q-1].number,g[Q]=G[Q-1].title.substring(0,4),m[Q]=G[Q-1].abrev,K+=parseInt(d[Q]),Q++;p[1]="R1",p[2]="R2",p[3]="R3",p[4]="R4",p[5]="R5",p[6]="R6",p[7]="R7",p[8]="R8",p[9]="R9",p[10]="R10";var Z=10,et=K;i.lineWidth=J,r=0-Math.PI/2;for(var v=new Array,b=0,h=0,y=1,k=(new Array,0),T=0,I=new Array,D=1,tt=0,w=0,A=Array();Z>=D;)d[D]>0&&(endAngle=r+TranslateAngle(d[D],100),midAngle=r+TranslateAngle(d[D]/2,100),A[D]=midAngle,w=parseInt(w+parseInt(d[D])),MidPoint=w-parseInt(d[D])/2,K/2>=MidPoint?(v[D]="Right",b++):(v[D]="Left",h++),r=endAngle,M=endAngle,tt++),D++;var D=1;for(r=0-Math.PI/2;Z>=D;){if(i.beginPath(),SegColor=_[D],tt=0,d[D]>0){tt++,i.strokeStyle=SegColor,endAngle=r+TranslateAngle(d[D],et),midAngle=r+TranslateAngle(d[D]/2,et),i.lineWidth=J,i.arc(l,o,n,r,endAngle,c),i.stroke();var at=30,st=n-J/2-at/2,q=l+st*Math.cos(midAngle)-at/2,U=o+st*Math.sin(midAngle)-at/2,N=document.getElementById(p[D]);i.drawImage(N,q,U,at,at);var z=l+(n+J/2)*Math.cos(midAngle),F=o+(n+J/2)*Math.sin(midAngle);y=b>=tt?tt:tt-b,"Left"==v[D]?(k=10,O=2*o/(h+1),I[D]=6-(D-h+1),0==I[D]&&(I[D]=1),I[D]=D,T=O*y,VerticalDiff=T-F,Math.abs(VerticalDiff)>2&&(T-=VerticalDiff/2)):(k=l-n/2+20,k=280,O=2*o/(b+1),T=O*y,I[D]=D,VerticalDiff=T-F,Math.abs(VerticalDiff)>2&&(T-=VerticalDiff/2)),i.font="10px Arial",i.fillStyle="#b6b6b6",i.fillText(g[I[D]],k,T+8),i.fillText(m[I[D]],k,T+8+10),i.beginPath(),i.lineWidth=3,i.strokeStyle=_[I[D]],i.lineCap="round",i.moveTo(k+35,T),i.lineTo(k+35,T+20),i.stroke(),i.font="bold 14px Arial",i.fillStyle="grey",percentSeg=d[I[D]],labelSeg=100==percentSeg?"OK":percentSeg+"",i.fillText(labelSeg,k+40,T+5+10),i.beginPath(),i.strokeStyle="#cacaca",i.lineWidth=2,"Left"==v[D]?(X1=k+40+30,XMiddle=z-(z-X1)/2):(X1=k-5,XMiddle=X1-(X1-z)/2),Y1=T+3+10-5,YMiddle=F+(Y1-F)/2,YMiddle=F,i.moveTo(X1,Y1),i.bezierCurveTo(XMiddle,YMiddle,XMiddle,YMiddle,z,F),i.stroke(),i.lineCap="butt",r=endAngle}D++}i.beginPath(),i.fillStyle="#54bc00",i.lineWidth=1,i.arc(l,o,n-50,-Math.PI/2,2*Math.PI,c),i.fill(),i.strokeStyle="grey",i.stroke(),i.lineWidth=35;var L="28pt Arial",B=et+"";i.fillStyle="#54bc00",i.fillStyle="white",i.textAlign="left",i.textBaseline="top",i.font=L;var W=i.measureText(B).width,H=GetCanvasTextHeight(B,L);i.fillText(B,l-W/2,o-(H-7))}function getDay(e){return 1==e?"Sunday":2==e?"Monday":3==e?"Tuesday":4==e?"Wednesday":5==e?"Thursday":6==e?"Friday":7==e?"Saturday":void 0}function getSlot(e){return 1==e?"8:00 AM and 10:00 AM":2==e?"10:00 AM and 12:00 PM":3==e?"12:00 PM and 2:00 PM":4==e?"2:00 PM and 4:00 PM":5==e?"4:00 PM and 6:00 PM":6==e?"6:00 PM and 8:00 PM":7==e?"8:00 PM and 10:00 PM":void 0}function getSlotStartTime(e){return 1==e?"08:00:00":2==e?"10:00:00":3==e?"12:00:00":4==e?"14:00:00":5==e?"16:00:00":6==e?"18:00:00":7==e?"20:00:00":void 0}function getSlotEndTime(e){return 1==e?"10:00:00":2==e?"12:00:00":3==e?"14:00:00":4==e?"16:00:00":5==e?"18:00:00":6==e?"20:00:00":7==e?"22:00:00":void 0}function resetDateTimeSelector(){$("#sun").removeClass("day_selected"),$("#mon").removeClass("day_selected"),$("#tues").removeClass("day_selected"),$("#wed").removeClass("day_selected"),$("#thur").removeClass("day_selected"),$("#fri").removeClass("day_selected"),$("#sat").removeClass("day_selected"),$("#8_10_am").removeClass("slot_selected"),$("#10_12").removeClass("slot_selected"),$("#12_2").removeClass("slot_selected"),$("#2_4").removeClass("slot_selected"),$("#4_6").removeClass("slot_selected"),$("#6_8").removeClass("slot_selected"),$("#8_10_pm").removeClass("slot_selected"),time_selected=-1,day_selected=-1,date_selected="",$("#day_selector_1").css("display","none"),$("#time_selector_1").css("display","none")}function getDayStr(e){return 0==e?"sun":1==e?"mon":2==e?"tues":3==e?"wed":4==e?"thur":5==e?"fri":6==e?"sat":void 0}function selectDay(e){$("#sun").removeClass("day_selected"),$("#mon").removeClass("day_selected"),$("#tues").removeClass("day_selected"),$("#wed").removeClass("day_selected"),$("#thur").removeClass("day_selected"),$("#fri").removeClass("day_selected"),$("#sat").removeClass("day_selected"),$("#"+e).addClass("day_selected")}function selectTime(e){$("#8_10_am").removeClass("slot_selected"),$("#10_12").removeClass("slot_selected"),$("#12_2").removeClass("slot_selected"),$("#2_4").removeClass("slot_selected"),$("#4_6").removeClass("slot_selected"),$("#6_8").removeClass("slot_selected"),$("#8_10_pm").removeClass("slot_selected"),$("#"+e).addClass("slot_selected")}function disableAllSlots(){$("#8_10_am").addClass("slot_disabled"),$("#10_12").addClass("slot_disabled"),$("#12_2").addClass("slot_disabled"),$("#2_4").addClass("slot_disabled"),$("#4_6").addClass("slot_disabled"),$("#6_8").addClass("slot_disabled"),$("#8_10_pm").addClass("slot_disabled")}function getLifePines(e){$.ajax({url:e,dataType:"json",async:!1,success:function(e){pines=e.items}})}function TranslateAngle(e,t){var a=e*Math.PI*2/t;return parseFloat(a)}function hexToRgb(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}function GetICD10Code(e){{var t="https://api.aqua.io/codes/beta/icd10.json?utf8=%E2%9C%93&q%5Bdescription_cont%5D="+e,a="";Array()}return $.ajax({dataType:"json",url:t,async:!1,success:function(e){a=e;e[0]},error:function(e,t){alert(t)}}),a}function GetCanvasTextHeight(e,t){var a=document.createElement("canvas"),s=100,i=100;a.setAttribute("height",s),a.setAttribute("width",i);var l=a.getContext("2d");l.fillRect(0,0,i,s),l.textBaseline="top",l.fillStyle="white",l.font=t,l.fillText(e,0,0);for(var o=l.getImageData(0,0,i,s).data,n=-1,r=-1,c=0;s>c;c++)for(var _=0;i>_;_++){var d=4*(c*i+_);{if(0!=o[d]){-1==n&&(n=c);break}if(_==i-1&&-1!=n){r=c,c=s;break}}}return r-n}function findPos(e){var t=0,a=0;if(e.offsetParent){do t+=e.offsetLeft,a+=e.offsetTop;while(e=e.offsetParent);return{x:t,y:a}}return void 0}function rgbToHex(e,t,a){if(e>255||t>255||a>255)throw"Invalid color component";return(e<<16|t<<8|a).toString(16)}var timeoutTime=18e6,timeoutTimer=setTimeout(ShowTimeOutWarning,timeoutTime),active_session_timer=6e4,sessionTimer=setTimeout(inform_about_session,active_session_timer),reportcheck=new Array;domain=get_domain(),session_medid=get_session_variable("MEDID"),session_userid=get_session_variable("UserID"),data=get_userdashboard_data(),timezone=data[0],place=data[1],setInterval(function(){$("#newinbox").trigger("click")},1e4),""!=$("#CURRENTCALLINGDOCTOR").val()&&"0"!=$("#CURRENTCALLINGDOCTOR").val()&&"-1"!=$("#CURRENTCALLINGDOCTOR").val()&&($("#video_consultation_text").text("You have a video consultation appointment with Doctor "+$("#CURRENTCALLINGDOCTORNAME").val()+"."),$("#telemed_notificator").css("display","block")),$("#telemed_connect_button").live("click",function(){window.open("telemedicine_patient.php?MED="+$("#CURRENTCALLINGDOCTOR").val()+"&PAT="+$("#USERID").val()+"&show=0","Telemedicine","height=585,width=700,left=100,top=100,resizable=yes,scrollbars=yes,toolbar=yes,menubar=no,location=no,directories=no,status=yes")}),$("#telemed_deny_button").live("click",function(){$("#telemed_notificator").slideUp(),$.post("reset_appointment.php",{pat_id:$("#USERID").val()},function(){})}),$("#LoadCanvas1").css("display","none"),$("#LoadCanvas2").css("display","none"),LoadDonuts(),$("body").bind("mousedown keydown",function(){clearTimeout(timeoutTimer),timeoutTimer=setTimeout(ShowTimeOutWarning,timeoutTime)});var Canvas1State=0;$("#PHSLabel").live("click",function(){if(0==Canvas1State){$("#PHSLabel").html("See Graph");for(var e="",t=Date.parse(ConnData[0].latest_update),a="",s="",i="",l=0;5>l;)thisDate=Date.parse(ConnData[l].latest_update),thisDate>=t&&(t=thisDate,a=ConnData[l].latest_update),l++;var o="",n="",r="",c="",_="";"th"==language?(o="Última actualización en",n="dias",r="semana",c="meses",_="años"):"en"==language&&(o="Latest update on",n="days",r="weeks",c="months",_="years"),i=o+" "+a.substr(0,10);var d=new Date,p=d-t,f=parseInt(p/864e5),u=parseInt(p/6048e5),g=parseInt(p/2592e6),m=parseInt(p/31536e6);14>f&&(s=f+" "+n),u>=2&&(s=u+" "+r),u>=8&&(s=g+" "+c),g>=13&&(s=m+" "+_);var v=u;if(v>1){var o="";"th"==language?o="Actualizar":"en"==language&&(o="Update"),contentTime="Summary is "+s+" old",iconTime='<button id="UpdateSumm" class="find_doctor_button" style="float:right; display: block; background-color: rgb(82, 216, 89); width:80px; margin-top:-3px;">'+o+"</button>"}else{var o="";"th"==language?o="Actualizado":"en"==language&&(o="Updated"),contentTime=o,iconTime='<i class="icon-check icon-2x" style="float:left;"></i>'}if(m>4){var o="",n="";"th"==language?(o="Actualizar",n="Resumen nunca actualizado"):"en"==language&&(o="Update",n="Summary never updated"),contentTime=n,iconTime='<i class="icon-exclamation icon-2x" style="float:left; color:rgb(216, 72, 64);"></i><button id="UpdateSumm" class="find_doctor_button" style="float:right; display: block; background-color: rgb(82, 216, 89); width:80px; margin-top:-3px;">'+o+"</button>"}for(var h=-1,t=Date.parse("1975-01-01 00:00:00"),y=t,x="",l=0;5>l;)thisVerified=ConnData[l].doctor_signed,thisDate=Date.parse(ConnData[l].latest_update),console.log(" K="+l+"   Doctor:"+l+"  Date:"+l),thisVerified>-1&&thisDate>=t&&(t=thisDate,h=ConnData[l].doctor_signed,y=ConnData[l].latest_update),l++;if(h>-1){var o="",n="",r="";"th"==language?(o="Verificar",tranlation2="Verificado por",r="en"):"en"==language&&(o="Verify",tranlation2="Verified by",r="on"),namedoctor=LanzaAjax("/getDoctorName.php?IdDoctor="+h),contentVerif=o;var C=(new Date).getTimezoneOffset(),S=moment(y).add("minutes",-1*C).fromNow();x=n+" "+namedoctor+" "+S,iconVerif='<i class="icon-check icon-2x"></i>'}else{var o="";"th"==language?(o="Verificar",contentVerif="No Verificado"):"en"==language&&(o="Verify",contentVerif="Not Verified"),iconVerif='<i class="icon-exclamation icon-2x" style="float:left; color:rgb(216, 72, 64);"></i><button id="VerifyDoctor" class="find_doctor_button" style="float:right; display: block; background-color: rgb(34, 174, 255); width:80px; margin-top:-3px;">'+o+"</button>"}for(var k=0,T=0,I='<i class="icon-check icon-2x"></i>',l=0;5>l;)k+=parseInt(ConnData[l].Data),ConnData[l].Data>0&&T++,l++;4>T&&(I='<i class="icon-exclamation icon-2x" style="float:left; color:rgb(216, 72, 64);"></i>');var o="";"th"==language?o="eventos registrados":"en"==language&&(o="events registered"),AdminData=ConnData[0].Data,PastDx=ConnData[1].Data,Medications=ConnData[2].Data,Immuno=ConnData[3].Data,Family=ConnData[4].Data,Habits=ConnData[5].Data,Allergies=ConnData[6].Data,e+="	               <style>",e+="	                div.SumBox{",e+="	                    float:left; ",e+="	                    position: absolute; ",e+="	                    z-index: 10; ",e+="	                    box-shadow: inset 0px 0px 2px 0px whitesmoke;",e+="	                }",e+="	                div.SumBox:hover {         ",e+="	                    opacity: 0.8;                ",e+="	                }                                ",e+="	                ",e+="	                img.SumBoxIcon{",e+="	                    position:absolute;",e+="	                    width:30px;",e+="	                    height:30px;",e+="	                    top: 50%;",e+="	                    left: 50%;",e+="	                    transform: translate(-50%, -50%);",e+="	                    font-size: 20px;",e+="	                    color: grey;",e+="	                    z-index:460;",e+="	                }",e+="	",e+="	                div.BannerIcon{     ",e+="	                    border: 1px solid #cacaca;       ",e+="	                    width: 15px;       ",e+="	                    height: 15px;      ",e+="	                    border-radius: 10px;       ",e+="	                    position: absolute;        ",e+="	                    left: 50%;       ",e+="	                    top: 50%;         ",e+="	                    z-index: 440;          ",e+="	                    margin-left: 8px;      ",e+="	                    margin-top: -18px;     ",e+="	                    color: #cacaca;     ",e+="	                    font-size: 12px;",e+="	                    text-align: center;     ",e+="	                    font-weight: bold;     ",e+="	                    line-height: 15px;     ",e+="	                }";var D=-1!=navigator.userAgent.indexOf("Mac");if(D)var w="top:50%;left:45%;",A="top:50%;left:45%;",E="top:43%;left:48%;",M="top:43%;left:43%;",O="top:45%;left:45%;",R="top:48%;left:45%;",P="top:45%;left:40%;";else var w="top:40%;left:35%;",A="top:40%;left:40%;",E="top:30%;left:35%;",M="top:30%;left:32%;",O="top:30%;left:27%;",R="top:25%;left:35%;",P="top:25%;left:25%;";e+="	                    ",e+="	                </style>  ",e+='	                <div style="background-color:white; z-index:999; position:absolute; left:0%; top:0%; width:100%; height:10px;"></div>  ',e+='	                <div style="background-color:white; z-index:999; position:absolute; left:320px; top:0%; width:50px; height:100%;"></div>  ',e+='	                <div id="SumGraph2" style="width: 275px; height: 165px; margin-top: 10px; margin-left: 45px; border:0px solid #cacaca; position:relative; cursor: pointer; border-radius:10px;">',e+="	                  ",e+='	                    <div class="SumBox" style="width:45%; height:45%; top:0%; left:0%; background-color:#54bc00; border-top-left-radius:10px;">',e+='	                       <img style="'+w+'" class="SumBoxIcon" src="images/icons/Adminx2_svg.png" />',AdminData>0&&(e+='	                       <div class="BannerIcon" >'+AdminData+"</div>"),e+="	                    </div>        ",e+='	                    <div class="SumBox" style="width:55%; height:45%; top:0%; left:45%; background-color:#2C3E50;  border-top-right-radius:10px;">',e+='	                        <img style="'+A+'" class="SumBoxIcon" src="images/icons/historyx2_svg.png" />',PastDx>0&&(e+='	                        <div class="BannerIcon" >'+PastDx+"</div>"),e+="	                    </div>     ",e+='	                    <div class="SumBox" style="width:30%; height:30%; top:45%; left:0%; background-color:#18BC9C;">',e+='	                        <img style="'+E+'" class="SumBoxIcon" src="images/icons/medicationx2_svg.png" />',Medications>0&&(e+='	                        <div class="BannerIcon" >'+Medications+"</div>"),e+="	                   </div>  ",e+='	                    <div class="SumBox" style="width:40%; height:30%; top:45%; left:30%; background-color:#E74C3C;">',e+='	                        <img style="'+M+'" class="SumBoxIcon" src="images/icons/familyx2_svg.png" />',Family>0&&(e+='	                        <div class="BannerIcon" >'+Family+"</div>"),e+="	                  </div>         ",e+='	                    <div class="SumBox" style="width:30%; height:55%; top:45%; left:70%; background-color:#3498DB;  border-bottom-right-radius:10px;">',e+='	                       <img style="'+O+'" class="SumBoxIcon" src="images/icons/habitsx2_svg.png" />',Habits>0&&(e+='	                        <div class="BannerIcon" >'+Habits+"</div>"),e+="	                   </div>            ",e+='	                    <div class="SumBox" style="width:50%; height:25%; top:75%; left:0%; background-color:#F39C12;  border-bottom-left-radius:10px;">',e+='	                        <img style="'+R+'" class="SumBoxIcon" src="images/icons/immunox2_svg.png" />',Immuno>0&&(e+='	                        <div class="BannerIcon" >'+Immuno+"</div>"),e+="	                  </div>    ",e+='	                    <div class="SumBox" style="width:20%; height:25%; top:75%; left:50%; background-color:#F39C12;">',e+='	                        <img style="'+P+'" class="SumBoxIcon" src="images/icons/allergyx2_svg.png" />',Allergies>0&&(e+='	                        <div class="BannerIcon" >'+Allergies+"</div>"),e+="	                   </div>      ",h>-1&&(e+='	                    <div class="ribbon-banner" id="ribbon-verified" href="#" style="display: block; width:220px; right:-63px; top:22px; background-color:#DB3469;"><span class="ribbon-lgtext">Verified</span><br> <span class="ribbon-smtext" style="font-size:8px;">'+x+'<span class="ribbon-lgtext"></span></span></div>'),e+="	",e+="	                  </div> ",$("#ALTCanvas1").html(e),$("#ALTCanvas1").animate({height:"200px"},1e3),$("#PHSLabel").css("background-color","rgb(82, 216, 89)"),Canvas1State=1}else $("#PHSLabel").html("See Status"),$("#PHSLabel").css("background-color","rgb(74, 134, 54)"),$("#ALTCanvas1").animate({height:"0px"},1e3),Canvas1State=0}),$("#myCanvas,#ALTCanvas1").live("click",function(){var e=$("#USERID").val();$("#summary_modal").html('<iframe src="medicalPassport.php?modal=1&IdUsu='+e+'" scrolling="no" style="width:1000px;height:690px; margin: 0px; border: 0px solid #FFF; outline: 0px; padding: 0px; overflow: hidden;"></iframe>'),$("#summary_modal").dialog({bigframe:!0,width:1050,height:690,resize:!1,modal:!0})}),$("#editPatient").live("click",function(){var e=$("#USERID").val();window.location.replace("patientdetailMED-new.php?IdUsu="+e)}),$("#ButtonReview").live("click",function(){var e=$("#USERID").val();$("#summary_modal").html('<iframe src="medicalPassport.php?modal=1&IdUsu='+e+'" width="1000" height="660" scrolling="no" style="width:1000px;height:660px; margin: 0px; border: 0px solid #FFF; outline: 0px; padding: 0px; overflow: hidden;"></iframe>'),$("#summary_modal").dialog({bigframe:!0,width:1050,height:690,resize:!1,modal:!0}).onclose(function(){$.post("SavePatientSummaryAsPDF.php",{IdUsu:session_userid},function(){})})}),$("#UpdateSumm").live("click",function(){var e=$("#USERID").val();window.location.replace("medicalPassport.php?IdUsu="+e)}),$("#VerifyDoctor").live("click",function(){$("#Talk").trigger("click")}),$("#myCanvas").mousemove(function(e){var t=findPos(this),a=e.pageX-t.x,s=e.pageY-t.y,i="x="+a+", y="+s,l=this.getContext("2d"),o=l.getImageData(a,s,1,1).data,n="#"+("000000"+rgbToHex(o[0],o[1],o[2])).slice(-6);$("#status").html(i+"<br>"+n+" - ")}),$("#myCanvas2").live("click",function(){var e=$("#USERID").val();window.location.replace("patientdetailMED-new.php?IdUsu="+e)}),$(window).bind("load",function(){$("#newinbox").trigger("click")}),$("#BotMessages").live("click",function(){$("#compose_message").trigger("click")}),$("#newinbox").live("click",function(){var e="<?php echo $domain;?>/getInboxMessageUSER.php?IdMED=<?php echo $MEDID;?>&patient=<?php echo $UserID;?>";$("#datatable_3").load(e),$("#datatable_3").trigger("update")}),$("#newoutbox").live("click",function(){var e="<?php echo $domain;?>/getOutboxMessageUSER.php?IdMED=<?php echo $MEDID;?>&patient=<?php echo $UserID;?>";$("#datatable_4").load(e),$("#datatable_4").trigger("update")}),$("#SearchDirectory").live("click",function(){{var e=GetICD10Code("Append");Object.keys(e).length}}),$("#setup_phone").intlTelInput(),$.post("get_user_info.php",{id:$("#USERID").val()},function(e){var a=JSON.parse(e);$("#timezone_picker option[value='"+a.timezone+"']").attr("selected","selected"),a.hasOwnProperty("location")&&a.location.length>0&&setTimeout(function(){$("#country_setup").val(a.location),$("#country_setup").change()},800),a.hasOwnProperty("location2")&&a.location2.length>0&&setTimeout(function(){$("#state_setup").val(a.location2),$("#state_setup").change()},900),a.hasOwnProperty("email")&&a.email.length>0&&$("#setup_email").val(a.email),a.hasOwnProperty("phone")&&a.phone.length>0&&$("#setup_phone").val("+"+a.phone)}),$("#timezone_picker").on("change",function(){console.log("clicked")}),$("#MedHistory").live("click",function(){var e=$("#USERID").val();$("#summary_modal").html('<iframe src="medicalPassport.php?modal=1&IdUsu='+e+'" width="1000" height="660" scrolling="no" style="width:1000px;height:660px; margin: 0px; border: 0px solid #FFF; outline: 0px; padding: 0px; overflow: hidden;"></iframe>'),$("#summary_modal").dialog({bigframe:!0,width:1050,height:690,resize:!1,modal:!0})}),$("#timezone_button").on("click",function(){$.post("update_user.php",{id:$("#USERID").val(),timezone:$("#timezone_picker").val().toString()},function(){}),$("#setup_modal_notification").css("background-color","#52D859"),$("#setup_modal_notification").html('<p style="color: #fff;">Timezone Changed Successfully!</p>'),$("#setup_modal_notification_container").animate({opacity:"1.0"},{duration:1e3,easing:"easeInOutQuad",complete:function(){setTimeout(function(){$("#setup_modal_notification_container").animate({opacity:"0.0"},{duration:1e3,easing:"easeInOutQuad",complete:function(){}})},2e3)}}),timezone_changed=$("#timezone_picker").val()}),$("#location_button").on("click",function(){$.post("update_user.php",{id:$("#USERID").val(),location:$("#country_setup").val(),location2:$("#state_setup").val()},function(){}),$("#setup_modal_notification").css("background-color","#52D859"),$("#setup_modal_notification").html('<p style="color: #fff;">Location Changed Successfully!</p>'),$("#setup_modal_notification_container").animate({opacity:"1.0"},{duration:1e3,easing:"easeInOutQuad",complete:function(){setTimeout(function(){$("#setup_modal_notification_container").animate({opacity:"0.0"},{duration:1e3,easing:"easeInOutQuad",complete:function(){}})},2e3)}}),country_changed=$("#country_setup").val(),state_changed=$("#state_setup").val()}),$("#contact_button").on("click",function(){$.post("update_user.php",{id:$("#USERID").val(),email:$("#setup_email").val(),phone:$("#setup_phone").val()},function(e){console.log(e),e.length>0?($("#setup_modal_notification").css("background-color","#D5483A"),$("#setup_modal_notification").html('<p style="color: #fff;">'+e+"</p>"),$("#setup_modal_notification_container").animate({opacity:"1.0"},{duration:1e3,easing:"easeInOutQuad",complete:function(){setTimeout(function(){$("#setup_modal_notification_container").animate({opacity:"0.0"},{duration:1e3,easing:"easeInOutQuad",complete:function(){}})},2e3)}})):($("#setup_modal_notification").css("background-color","#52D859"),$("#setup_modal_notification").html('<p style="color: #fff;">Contact Information Changed Successfully!</p>'),$("#setup_modal_notification_container").animate({opacity:"1.0"},{duration:1e3,easing:"easeInOutQuad",complete:function(){setTimeout(function(){$("#setup_modal_notification_container").animate({opacity:"0.0"},{duration:1e3,easing:"easeInOutQuad",complete:function(){}})},2e3)}}))})}),$('button[id^="setup_menu_"]').on("click",function(){$('button[id^="setup_menu_"]').each(function(){$(this).css("background-color","#FBFBFB"),$(this).css("color","#22AEFF"),$(this).css("border","1px solid #E6E6E6")}),$('div[id^="setup_page_"]').each(function(){$(this).css("display","none")});var e=$(this).attr("id").split("_")[2];$(this).css("background-color","#22AEFF"),$(this).css("color","#FFF"),$(this).css("border","0px solid #E6E6E6"),$("#setup_page_"+e).css("display","block"),"1"==e?$("#setup_title").text("Change Password"):"2"==e?$("#setup_title").text("Set Timezone"):"3"==e?$("#setup_title").text("Manage Credit Cards"):"4"==e?$("#setup_title").text("Set Location"):"5"==e&&$("#setup_title").text("Set Contact Information")});var state_changed="",country_changed="",timezone_changed="";$("#SetUp").live("click",function(){$("#change_password_validated_section").css("display","none"),$("#pw1").val(""),$("#pw2").val(""),$("#pw3").val(""),$("#setup_modal_notification_container").css("margin-top","0px"),$("#setup_modal").dialog({bigframe:!0,width:640,height:400,resize:!1,modal:!0});var e=geoplugin_countryName(),t="";"United States"==e&&(e="USA");var a="<?php echo $Place;?>";location_array=a.split(","),2==location_array.length?(t=location_array[0].trim(),e=location_array[1].trim()):1==location_array.length&&""!=location&&(e=a.trim()),""!=country_changed&&(e=country_changed),""!=country_changed&&(t=state_changed),$("#country_setup").val(e),$("#country_setup").change(),$("#state_setup").val(t),$("#state_setup").change();var s="<?php echo $Timezone;?>";timezone_array=s.split(":"),timezone_format=timezone_array[0],timezone_format=parseInt(timezone_format,10)+".0",""!=timezone_changed&&(timezone_format=timezone_changed),$("#timezone_picker").val(timezone_format),$("#timezone_picker").change()}),$("#change_password_validate_button").live("click",function(){$.post("validate_password.php",{pat_id:$("#USERID").val(),pw:$("#pw1").val()},function(e){"1"==e&&"none"==$("#change_password_validated_section").css("display")?$("#change_password_validated_section").slideDown():($("#setup_modal_notification").css("background-color","#D5483A"),$("#setup_modal_notification").html('<p style="color: #fff;">Password Incorrect</p>'),$("#setup_modal_notification_container").animate({opacity:"1.0"},{duration:1e3,easing:"easeInOutQuad",complete:function(){setTimeout(function(){$("#setup_modal_notification_container").animate({opacity:"0.0"},{duration:1e3,easing:"easeInOutQuad",complete:function(){}})},2e3)}}))})}),$("#change_password_finish_button").live("click",function(){$("#pw2").val()==$("#pw3").val()?($("#pw1").val(""),$("#change_password_validated_section").slideUp(),$.post("update_patient.php",{new_pw:$("#pw2").val(),pat_id:$("#USERID").val()},function(){$("#pw2").val(""),$("#pw3").val(""),$("#setup_modal_notification").css("background-color","#52D859"),$("#setup_modal_notification").html('<p style="color: #fff;">Password Changed Successfully!</p>'),$("#setup_modal_notification_container").animate({opacity:"1.0"},{duration:1e3,easing:"easeInOutQuad",complete:function(){setTimeout(function(){$("#setup_modal_notification_container").animate({opacity:"0.0"},{duration:1e3,easing:"easeInOutQuad",complete:function(){}})},2e3)}})})):($("#setup_modal_notification").css("background-color","#D5483A"),$("#setup_modal_notification").html('<p style="color: #fff;">Passwords Did Not Match</p>'),$("#setup_modal_notification_container").animate({opacity:"1.0"},{duration:1e3,easing:"easeInOutQuad",complete:function(){setTimeout(function(){$("#setup_modal_notification_container").animate({opacity:"0.0"},{duration:1e3,easing:"easeInOutQuad",complete:function(){}})},2e3)}}))});var doctor_to_connect="",type_of_doctor_to_find="",find_doctor_page=0,selected_doctor_available=0,selected_doctor_info="",time_selected=-1,day_selected=-1,date_selected="",consultation_type=2,zones=null,selected_timezone="00:00:00";$("#country").on("change",function(){"USA"==$(this).val()?$("#state").parent().parent().css("display","block"):$("#state").parent().parent().css("display","none")
}),$("#country_setup").on("change",function(){"USA"==$(this).val()?$("#state_setup").parent().parent().css("visibility","visible"):$("#state_setup").parent().parent().css("visibility","hidden")}),$("#Talk").live("click",function(){doctor_to_connect="",type_of_doctor_to_find="",$(".recent_doctor_button_selected").attr("class","recent_doctor_button"),$("#Talk_Section_1").css("display","block"),$("#Talk_Section_2").css("display","none"),$("#Talk_Section_3").css("display","none"),$("#Talk_Section_4").css("display","none"),$("#find_doctor_modal").dialog({bgiframe:!0,width:550,height:413,resize:!1,modal:!0}),$("#step_bar_1").attr("class","step_bar"),$("#step_circle_1").attr("class","step_circle lit"),$("#step_circle_2").attr("class","step_circle"),$("#step_bar_2").attr("class","step_bar"),$("#step_circle_3").attr("class","step_circle"),$("#step_bar_3").attr("class","step_bar"),$("#step_circle_4").attr("class","step_circle"),$("#step_bar_4").attr("class","step_bar"),$("#step_circle_5").attr("class","step_circle"),$("#step_bar_5").attr("class","step_bar"),$("#step_circle_6").attr("class","step_circle"),$("#find_doctor_label").text(""),$("#find_doctor_next_button").css("display","block"),$("#find_doctor_previous_button").css("display","block"),$("#find_doctor_cancel_button").css("display","block"),$("#find_doctor_close_button").css("display","none"),$("#find_doctor_my_doctors_1").css("display","none"),$("#find_doctor_my_doctors_2").css("display","none"),$("#find_doctor_appointment_1").css("display","none"),$("#find_doctor_appointment_2").css("display","none"),$("#find_doctor_appointment_3").css("display","none"),$("#find_doctor_time").css("display","none"),$("#find_doctor_receipt").css("display","none"),$("#find_doctor_confirmation").css("display","none"),$("#time_selector_1").css("display","none"),$("#day_selector_1").css("display","none"),$("#find_doctor_main").css("display","block"),find_doctor_page=0}),$("#find_doctor_next_button").live("click",function(){if(30==find_doctor_page||21==find_doctor_page||10==find_doctor_page){if($("#step_bar_1").attr("class","step_bar lit"),$("#step_circle_1").attr("class","step_circle lit"),$("#step_circle_2").attr("class","step_circle lit"),$("#step_bar_2").attr("class","step_bar lit"),$("#step_circle_3").attr("class","step_circle lit"),$("#step_bar_3").attr("class","step_bar lit"),$("#step_circle_4").attr("class","step_circle lit"),$("#find_doctor_label").text("Select Time"),30==find_doctor_page||10==find_doctor_page)if(10==find_doctor_page||30==find_doctor_page){var e="General Practice";10!=find_doctor_page&&30!=find_doctor_page&&null!=$("#speciality").val()&&(e=$("#speciality").val());var t=$("#country").val(),a="";$("#state").val().length>0&&"-1"!=$("#state").val()&&(a=$("#state").val()+", "+$("#country").val());var s=!0;31==find_doctor_page&&(s=!1),$.post("find_doctor.php",{type:e,location_1:t,location_2:a,must_be_available:s},function(e){if("none"!=e){var a=JSON.parse(e);selected_doctor_info="recdoc_"+a.id+"_"+a.phone+"_"+a.name+"_"+a.location,console.log(selected_doctor_info),$.post("getDoctorAvailableTimeranges.php",{id:a.id},function(e){console.log(e);for(var a=JSON.parse(e),s=0;7>s;s++)0==a.slots[s].length?($("#"+getDayStr(s)).addClass("day_disabled"),$("#"+getDayStr(s)).children("input").eq(1).val("[]"),$("#"+getDayStr(s)).children("input").eq(2).val("")):($("#"+getDayStr(s)).removeClass("day_disabled"),$("#"+getDayStr(s)).children("input").eq(1).val("["+a.slots[s].toString()+"]"),$("#"+getDayStr(s)).children("input").eq(2).val("["+a.zones[s].toString()+"]"));if(30==find_doctor_page)find_doctor_page=32,resetDateTimeSelector(),$("#find_doctor_appointment_1").fadeOut(300,function(){$("#find_doctor_time").fadeIn(300)});else{find_doctor_page=12;var a=selected_doctor_info.split("_"),i='<ul style="color: #22AEFF; margin-top: 50px; margin-left: 120px;"><li style="text-align: left;">Receipt: <strong>HTI - CR102388</strong></li><li style="text-align: left;"><strong>';i+=1==consultation_type?"Video ":"Phone ",i+='Consultation</strong></li><li style="text-align: left;">With Dr. <strong>'+a[3]+" "+a[4]+'</strong></li><li style="text-align: left;">starting <strong>NOW</strong></li></ul></div>',$("#find_doctor_receipt").html(i),$("#find_doctor_confirmation").html('<p style="color: #22AEFF; margin-top: 50px;"><strong>Thank you!</strong><br/><strong>Your consultation appointment is confirmed and will start IMMEDIATELY.</strong></p></div>'),$("#find_doctor_appointment_1").fadeOut(300,function(){$("#find_doctor_receipt").fadeIn(300)}),$("#step_bar_4").attr("class","step_bar lit"),$("#step_circle_5").attr("class","step_circle lit"),$("#find_doctor_label").text("Confirmation")}})}else find_doctor_page=31==find_doctor_page?35:15,$("#find_doctor_next_button").css("display","none"),"th"==language?translation="Lo siento, no hemos podido encontrar ningún</br>médico general en tu area.":"en"==language&&(translation="Sorry, we could not find any<br/>general practicioners in your area."),$("#not_found_text").html(translation),$("#find_doctor_appointment_1").fadeOut(300,function(){$("#find_doctor_appointment_3").fadeIn(300)}),$("#step_bar_3").attr("class","step_bar"),$("#step_circle_4").attr("class","step_circle"),"th"==language?translation="Seleccionar Especialidad":"en"==language&&(translation="Select Speciality"),$("#find_doctor_label").text(translation)})}else $("#step_bar_3").attr("class","step_bar"),$("#step_circle_4").attr("class","step_circle"),"th"==language?translation="Seleccionar Especialidad":"en"==language&&(translation="Select Speciality"),$("#find_doctor_label").text(translation);21==find_doctor_page&&(0==selected_doctor_available?$("#in_location_checkbox").is(":checked")?(find_doctor_page=22,resetDateTimeSelector(),$("#find_doctor_my_doctors_2").fadeOut(300,function(){$("#find_doctor_time").fadeIn(300)})):($("#step_bar_3").attr("class","step_bar"),$("#step_circle_4").attr("class","step_circle"),"th"==language?translation="Seleccionar Tipo":"en"==language&&(translation="Select Type"),$("#find_doctor_label").text(translation)):$("#in_location_checkbox").is(":checked")?(find_doctor_page=25,$("#find_doctor_my_doctors_2").fadeOut(300,function(){$("#find_doctor_my_doctors_3").fadeIn(300)})):($("#step_bar_3").attr("class","step_bar"),$("#step_circle_4").attr("class","step_circle"),"th"==language?translation="Seleccionar Tipo":"en"==language&&(translation="Select Type"),$("#find_doctor_label").text(translation)))}else if(32==find_doctor_page||22==find_doctor_page)if($("#step_bar_1").attr("class","step_bar lit"),$("#step_circle_1").attr("class","step_circle lit"),$("#step_circle_2").attr("class","step_circle lit"),$("#step_bar_2").attr("class","step_bar lit"),$("#step_circle_3").attr("class","step_circle lit"),$("#step_bar_3").attr("class","step_bar lit"),$("#step_circle_4").attr("class","step_circle lit"),$("#step_bar_4").attr("class","step_bar lit"),$("#step_circle_5").attr("class","step_circle lit"),$("#find_doctor_label").text("Confirmation"),32==find_doctor_page){var i=selected_doctor_info.split("_"),l='<ul style="color: #22AEFF; margin-top: 50px; margin-left: 120px;"><li style="text-align: left;">Receipt: <strong>HTI - CR102388</strong></li><li style="text-align: left;"><strong>';l+=1==consultation_type?"Video ":"Phone ",l+='Consultation</strong></li><li style="text-align: left;">With Dr. <strong>'+i[3]+" "+i[4]+'</strong></li><li style="text-align: left;">next <strong>'+getDay(day_selected)+"</strong> between <strong>"+getSlot(time_selected)+"</strong></li></ul></div>",$("#find_doctor_receipt").html(l),$("#find_doctor_confirmation").html('<p style="color: #22AEFF; margin-top: 50px;"><strong>Thank you!</strong><br/><strong>Your consultation appointment is confirmed.</strong><br/>Please be ready at the selected day and time, and follow the instructions that we sent to you</p></div>'),find_doctor_page=33,$("#find_doctor_time").fadeOut(300,function(){$("#find_doctor_receipt").fadeIn(300)})}else if(22==find_doctor_page&&-1!=time_selected&&-1!=day_selected){find_doctor_page=23;var i=selected_doctor_info.split("_"),l='<ul style="color: #22AEFF; margin-top: 50px; margin-left: 120px;"><li style="text-align: left;">Receipt: <strong>HTI - CR102388</strong></li><li style="text-align: left;"><strong>';l+=1==consultation_type?"Video ":"Phone ",l+='Consultation</strong></li><li style="text-align: left;">With Dr. <strong>'+i[3]+" "+i[4]+'</strong></li><li style="text-align: left;">next <strong>'+getDay(day_selected)+"</strong> between <strong>"+getSlot(time_selected)+"</strong></li></ul></div>",$("#find_doctor_receipt").html(l),$("#find_doctor_confirmation").html('<p style="color: #22AEFF; margin-top: 50px;"><strong>Thank you!</strong><br/><strong>Your consultation appointment is confirmed.</strong><br/>Please be ready at the selected day and time, and follow the instructions that we sent to you</p></div>'),$("#find_doctor_time").fadeOut(300,function(){$("#find_doctor_receipt").fadeIn(300)})}else $("#step_bar_4").attr("class","step_bar"),$("#step_circle_5").attr("class","step_circle"),$("#find_doctor_label").text("Select Time");else if(33==find_doctor_page||23==find_doctor_page||26==find_doctor_page||12==find_doctor_page){if(33==find_doctor_page){find_doctor_page=34;var i=selected_doctor_info.split("_");console.log(date_selected);var o=1;1!=consultation_type&&(o=0),$.post("add_appointment.php",{medid:i[1],patid:$("#USERID").val(),date:date_selected,start_time:getSlotStartTime(time_selected),end_time:getSlotEndTime(time_selected),video:o,timezone:selected_timezone},function(e){"-1"!=e&&$.get("send_appointment_email.php?id="+e+"&type=patient",function(e){$.get("send_appointment_email.php?id="+e+"&type=doctor",function(){})})})}if(23==find_doctor_page){find_doctor_page=24;var i=selected_doctor_info.split("_");console.log(date_selected);var o=1;1!=consultation_type&&(o=0),$.post("add_appointment.php",{medid:i[1],patid:$("#USERID").val(),date:date_selected,start_time:getSlotStartTime(time_selected),end_time:getSlotEndTime(time_selected),video:o,timezone:selected_timezone},function(e){"-1"!=e&&$.get("send_appointment_email.php?id="+e+"&type=patient",function(e){$.get("send_appointment_email.php?id="+e+"&type=doctor",function(){})})})}if(26==find_doctor_page||12==find_doctor_page){find_doctor_page=26==find_doctor_page?27:13;var i=selected_doctor_info.split("_");$.post("start_telemed_phonecall.php",{pat_phone:$("#USERPHONE").val(),doc_phone:i[2],doc_id:i[1],pat_id:$("#USERID").val(),doc_name:i[3]+" "+i[4],pat_name:$("#USERNAME").val()+" "+$("#USERSURNAME").val()},function(e){console.log(e)})}$("#find_doctor_receipt").fadeOut(300,function(){$("#find_doctor_confirmation").fadeIn(300)}),$("#step_bar_1").attr("class","step_bar lit"),$("#step_circle_1").attr("class","step_circle lit"),$("#step_circle_2").attr("class","step_circle lit"),$("#step_bar_2").attr("class","step_bar lit"),$("#step_circle_3").attr("class","step_circle lit"),$("#step_bar_3").attr("class","step_bar lit"),$("#step_circle_4").attr("class","step_circle lit"),$("#step_bar_4").attr("class","step_bar lit"),$("#step_circle_5").attr("class","step_circle lit"),$("#step_bar_5").attr("class","step_bar lit"),$("#step_circle_6").attr("class","step_circle lit"),$("#find_doctor_label").text(""),$("#find_doctor_next_button").css("display","none"),$("#find_doctor_previous_button").css("display","none"),$("#find_doctor_cancel_button").css("display","none"),$("#find_doctor_close_button").css("display","block")}}),$("#find_doctor_previous_button").live("click",function(){23==find_doctor_page||33==find_doctor_page?(23==find_doctor_page?find_doctor_page=22:33==find_doctor_page&&(find_doctor_page=32),resetDateTimeSelector(),$("#find_doctor_receipt").fadeOut(300,function(){$("#find_doctor_time").fadeIn(300)}),$("#step_bar_1").attr("class","step_bar lit"),$("#step_circle_1").attr("class","step_circle lit"),$("#step_circle_2").attr("class","step_circle lit"),$("#step_bar_2").attr("class","step_bar lit"),$("#step_circle_3").attr("class","step_circle lit"),$("#step_bar_3").attr("class","step_bar lit"),$("#step_circle_4").attr("class","step_circle lit"),$("#step_bar_4").attr("class","step_bar"),$("#step_circle_5").attr("class","step_circle"),$("#find_doctor_label").text("Select Time")):22==find_doctor_page||32==find_doctor_page||12==find_doctor_page?($("#step_bar_1").attr("class","step_bar lit"),$("#step_circle_1").attr("class","step_circle lit"),$("#step_circle_2").attr("class","step_circle lit"),$("#step_bar_2").attr("class","step_bar lit"),$("#step_circle_3").attr("class","step_circle lit"),$("#step_bar_3").attr("class","step_bar"),$("#step_circle_4").attr("class","step_circle"),$("#step_bar_4").attr("class","step_bar"),$("#step_circle_5").attr("class","step_circle"),"th"==language?translation="Seleccionar Tipo":"en"==language&&(translation="Select Type"),$("#find_doctor_label").text(translation),22==find_doctor_page?0==selected_doctor_available?(find_doctor_page=21,$("#find_doctor_time").fadeOut(300,function(){$("#find_doctor_my_doctors_2").fadeIn(300)})):(find_doctor_page=25,$("#find_doctor_time").fadeOut(300,function(){$("#find_doctor_my_doctors_3").fadeIn(300)}),$("#find_doctor_label").text("Select Time"),$("#step_bar_3").attr("class","step_bar lit"),$("#step_circle_4").attr("class","step_circle lit")):(32==find_doctor_page||12==find_doctor_page)&&(32==find_doctor_page?(find_doctor_page=30,$("#find_doctor_time").fadeOut(300,function(){$("#find_doctor_appointment_1").fadeIn(300)}),"th"==language?translation="Seleccionar Tipo":"en"==language&&(translation="Select Type"),$("#find_doctor_label").text(translation),$("#step_bar_2").attr("class","step_bar"),$("#step_circle_3").attr("class","step_circle")):(find_doctor_page=10,$("#find_doctor_receipt").fadeOut(300,function(){$("#find_doctor_appointment_1").fadeIn(300)}),"th"==language?translation="Seleccionar Tipo":"en"==language&&(translation="Select Type"),$("#find_doctor_label").text(translation),$("#step_bar_2").attr("class","step_bar"),$("#step_circle_3").attr("class","step_circle")))):21==find_doctor_page||31==find_doctor_page||11==find_doctor_page?(21==find_doctor_page?($("#find_doctor_my_doctors_2").fadeOut(300,function(){$("#find_doctor_my_doctors_1").fadeIn(300)}),find_doctor_page=20,$("#find_doctor_label").text("Select Doctor")):31==find_doctor_page?(find_doctor_page=30,$("#find_doctor_appointment_2").fadeOut(300,function(){$("#find_doctor_appointment_1").fadeIn(300)}),"th"==language?translation="Seleccionar Tipo":"en"==language&&(translation="Select Type"),$("#find_doctor_label").text(translation)):(find_doctor_page=10,$("#find_doctor_appointment_2").fadeOut(300,function(){$("#find_doctor_appointment_1").fadeIn(300)}),"th"==language?translation="Seleccionar Tipo":"en"==language&&(translation="Select Type"),$("#find_doctor_label").text(translation)),$("#step_bar_1").attr("class","step_bar lit"),$("#step_circle_1").attr("class","step_circle lit"),$("#step_circle_2").attr("class","step_circle lit"),$("#step_bar_2").attr("class","step_bar"),$("#step_circle_3").attr("class","step_circle"),$("#step_bar_3").attr("class","step_bar"),$("#step_circle_4").attr("class","step_circle"),$("#step_bar_4").attr("class","step_bar"),$("#step_circle_5").attr("class","step_circle")):20==find_doctor_page||30==find_doctor_page||10==find_doctor_page?(20==find_doctor_page?$("#find_doctor_my_doctors_1").fadeOut(300,function(){$("#find_doctor_main").fadeIn(300)}):(30==find_doctor_page||10==find_doctor_page)&&$("#find_doctor_appointment_1").fadeOut(300,function(){$("#find_doctor_main").fadeIn(300)}),find_doctor_page=0,$("#step_bar_1").attr("class","step_bar"),$("#step_circle_1").attr("class","step_circle lit"),$("#step_circle_2").attr("class","step_circle"),$("#step_bar_2").attr("class","step_bar"),$("#step_circle_3").attr("class","step_circle"),$("#step_bar_3").attr("class","step_bar"),$("#step_circle_4").attr("class","step_circle"),$("#step_bar_4").attr("class","step_bar"),$("#step_circle_5").attr("class","step_circle"),$("#find_doctor_label").text("")):25==find_doctor_page?($("#find_doctor_my_doctors_3").fadeOut(300,function(){$("#find_doctor_my_doctors_2").fadeIn(300)}),find_doctor_page=21,$("#step_bar_1").attr("class","step_bar lit"),$("#step_circle_1").attr("class","step_circle lit"),$("#step_circle_2").attr("class","step_circle lit"),$("#step_bar_2").attr("class","step_bar lit"),$("#step_circle_3").attr("class","step_circle lit"),$("#step_bar_3").attr("class","step_bar"),$("#step_circle_4").attr("class","step_circle"),$("#step_bar_4").attr("class","step_bar"),$("#step_circle_5").attr("class","step_circle"),"th"==language?translation="Seleccionar Tipo":"en"==language&&(translation="Select Type"),$("#find_doctor_label").text(translation)):26==find_doctor_page?($("#find_doctor_receipt").fadeOut(300,function(){$("#find_doctor_my_doctors_3").fadeIn(300)}),find_doctor_page=25,$("#step_bar_1").attr("class","step_bar lit"),$("#step_circle_1").attr("class","step_circle lit"),$("#step_circle_2").attr("class","step_circle lit"),$("#step_bar_2").attr("class","step_bar lit"),$("#step_circle_3").attr("class","step_circle lit"),$("#step_bar_3").attr("class","step_bar lit"),$("#step_circle_4").attr("class","step_circle lit"),$("#step_bar_4").attr("class","step_bar"),$("#step_circle_5").attr("class","step_circle"),$("#find_doctor_label").text("Select Time")):35==find_doctor_page?($("#find_doctor_appointment_3").fadeOut(300,function(){$("#find_doctor_appointment_2").fadeIn(300)}),find_doctor_page=31,$("#find_doctor_next_button").css("display","block")):15==find_doctor_page&&($("#find_doctor_appointment_3").fadeOut(300,function(){$("#find_doctor_appointment_1").fadeIn(300)}),find_doctor_page=10,$("#find_doctor_next_button").css("display","block"))}),$("#find_doctor_cancel_button").live("click",function(){$("#find_doctor_modal").dialog("close")}),$("#find_doctor_close_button").live("click",function(){$("#find_doctor_modal").dialog("close")}),$("#find_doctor_now_button").live("click",function(){var e=geoplugin_countryName();"United States"==e&&(e="USA"),$("#country").val(e),$("#country").change(),"USA"==e?$("#state").parent().parent().css("display","block"):$("#state").parent().parent().css("display","none");var a=(geoplugin_region(),geoplugin_city());$("#state").val(a),$("#state").change(),$(this).hasClass("square_blue_button_disabled")||($("#step_bar_1").attr("class","step_bar lit"),$("#step_circle_1").attr("class","step_circle lit"),$("#step_circle_2").attr("class","step_circle lit"),$("#find_doctor_main").fadeOut(300,function(){$("#find_doctor_appointment_1").fadeIn(300)}),find_doctor_page=10,"th"==language?translation="Seleccionar Tipo":"en"==language&&(translation="Select Type"),$("#find_doctor_label").text(translation))}),$("#find_doctor_appointment_button").live("click",function(){var e=geoplugin_countryName();"United States"==e&&(e="USA"),$("#country").val(e),$("#country").change(),"USA"==e?$("#state").parent().parent().css("display","block"):$("#state").parent().parent().css("display","none");var a=(geoplugin_region(),geoplugin_city());$("#state").val(a),$("#state").change(),$("#step_bar_1").attr("class","step_bar lit"),$("#step_circle_1").attr("class","step_circle lit"),$("#step_circle_2").attr("class","step_circle lit"),$("#find_doctor_main").fadeOut(300,function(){$("#find_doctor_appointment_1").fadeIn(300)}),find_doctor_page=30,"th"==language?translation="Seleccionar Tipo":"en"==language&&(translation="Select Type"),$("#find_doctor_label").text(translation)}),$("#find_doctor_my_doctors_button").live("click",function(){$(this).hasClass("square_blue_button_disabled")||($("#step_bar_1").attr("class","step_bar lit"),$("#step_circle_1").attr("class","step_circle lit"),$("#step_circle_2").attr("class","step_circle lit"),$("#find_doctor_main").fadeOut(300,function(){$("#find_doctor_my_doctors_1").fadeIn(300)}),find_doctor_page=20,$("#find_doctor_label").text("Select Doctor"))}),$("[id^='recdoc_']").live("click",function(){$("#step_bar_1").attr("class","step_bar lit"),$("#step_circle_1").attr("class","step_circle lit"),$("#step_circle_2").attr("class","step_circle lit"),$("#step_bar_2").attr("class","step_bar lit"),$("#step_circle_3").attr("class","step_circle lit"),$("#find_doctor_my_doctors_1").fadeOut(300,function(){$("#find_doctor_my_doctors_2").fadeIn(300)}),find_doctor_page=21,selected_doctor_available=-1!=$(this).attr("id").search("Available")?1:0;var e="";"th"==language?e="Seleccionar Tipo":"en"==language&&(e="Select Type"),$("#find_doctor_label").text(e);var t=$(this).attr("id").split("_");selected_doctor_info=$(this).attr("id"),$("#doctor_location_text").html("Doctor "+t[3]+" "+t[4]+" is in <strong>"+t[5]+"</strong>.<br/>Please confirm that you are in <strong>"+t[5]+"</strong> as well."),$("#doctor_oncall_text").html("Doctor "+t[3]+" "+t[4]+" is ON CALL NOW!<br/>Would you like to connect now?"),$.post("getDoctorAvailableTimeranges.php",{id:t[1]},function(e){for(var a=JSON.parse(e),s=0;7>s;s++)0==a.slots[s].length?($("#"+getDayStr(s)).addClass("day_disabled"),$("#"+getDayStr(s)).children("input").eq(1).val("[]"),$("#"+getDayStr(s)).children("input").eq(2).val("")):($("#"+getDayStr(s)).removeClass("day_disabled"),$("#"+getDayStr(s)).children("input").eq(1).val("["+a.slots[s].toString()+"]"),$("#"+getDayStr(s)).children("input").eq(2).val("["+a.zones[s].toString()+"]"))})}),$("#find_doctor_video_button").live("click",function(){$("#find_doctor_video_button").css("background-color","#22aeff"),$("#find_doctor_phone_button").css("background-color","#535353"),consultation_type=1}),$("#find_doctor_phone_button").live("click",function(){$("#find_doctor_phone_button").css("background-color","#22aeff"),$("#find_doctor_video_button").css("background-color","#535353"),consultation_type=2}),$("#find_doctor_video_button_2").live("click",function(){$("#find_doctor_video_button_2").css("background-color","#22aeff"),$("#find_doctor_phone_button_2").css("background-color","#535353"),consultation_type=1}),$("#find_doctor_phone_button_2").live("click",function(){$("#find_doctor_phone_button_2").css("background-color","#22aeff"),$("#find_doctor_video_button_2").css("background-color","#535353"),consultation_type=2}),$("#connect_now_yes").live("click",function(){find_doctor_page=26,$("#find_doctor_my_doctors_3").fadeOut(300,function(){$("#find_doctor_receipt").fadeIn(300)}),$("#step_bar_1").attr("class","step_bar lit"),$("#step_circle_1").attr("class","step_circle lit"),$("#step_circle_2").attr("class","step_circle lit"),$("#step_bar_2").attr("class","step_bar lit"),$("#step_circle_3").attr("class","step_circle lit"),$("#step_bar_3").attr("class","step_bar lit"),$("#step_circle_4").attr("class","step_circle lit"),$("#step_bar_4").attr("class","step_bar lit"),$("#step_circle_5").attr("class","step_circle lit"),$("#find_doctor_label").text("Confirmation");var e=selected_doctor_info.split("_"),t='<ul style="color: #22AEFF; margin-top: 50px; margin-left: 120px;"><li style="text-align: left;">Receipt: <strong>HTI - CR102388</strong></li><li style="text-align: left;"><strong>';console.log($("#find_doctor_video_button_2").css("background-color")),t+=1==consultation_type?"Video ":"Phone ",t+='Consultation</strong></li><li style="text-align: left;">With Dr. <strong>'+e[3]+" "+e[4]+'</strong></li><li style="text-align: left;">starting <strong>NOW</strong></li></ul></div>',$("#find_doctor_receipt").html(t),$("#find_doctor_confirmation").html('<p style="color: #22AEFF; margin-top: 50px;"><strong>Thank you!</strong><br/><strong>Your consultation appointment is confirmed<br/> and will start IMMEDIATELY.</strong></p></div>')}),$("#connect_now_no").live("click",function(){find_doctor_page=22,resetDateTimeSelector(),$("#find_doctor_my_doctors_3").fadeOut(300,function(){$("#find_doctor_time").fadeIn(300)}),$("#step_bar_1").attr("class","step_bar lit"),$("#step_circle_1").attr("class","step_circle lit"),$("#step_circle_2").attr("class","step_circle lit"),$("#step_bar_2").attr("class","step_bar lit"),$("#step_circle_3").attr("class","step_circle lit"),$("#step_bar_3").attr("class","step_bar lit"),$("#step_circle_4").attr("class","step_circle lit"),$("#find_doctor_label").text("Select Time")}),$("#find_doctor_general_practicioner").live("click",function(){var e=$("#country").val(),t="";$("#state").val().length>0&&"-1"!=$("#state").val()&&(t=$("#state").val()+", "+$("#country").val());var a=!0;31==find_doctor_page&&(a=!1),console.log(e+" "+t+" "+a),$.post("find_doctor.php",{type:"General Practice",location_1:e,location_2:t,must_be_available:a},function(e){if("none"!=e){var a=JSON.parse(e);selected_doctor_info="recdoc_"+a.id+"_"+a.phone+"_"+a.name+"_"+a.location,console.log(selected_doctor_info),$.post("getDoctorAvailableTimeranges.php",{id:a.id},function(e){console.log(e);for(var a=JSON.parse(e),s=0;7>s;s++)0==a.slots[s].length?($("#"+getDayStr(s)).addClass("day_disabled"),$("#"+getDayStr(s)).children("input").eq(1).val("[]"),$("#"+getDayStr(s)).children("input").eq(2).val("")):($("#"+getDayStr(s)).removeClass("day_disabled"),$("#"+getDayStr(s)).children("input").eq(1).val("["+a.slots[s].toString()+"]"),$("#"+getDayStr(s)).children("input").eq(2).val("["+a.zones[s].toString()+"]"));if($("#step_bar_1").attr("class","step_bar lit"),$("#step_circle_1").attr("class","step_circle lit"),$("#step_circle_2").attr("class","step_circle lit"),$("#step_bar_2").attr("class","step_bar lit"),$("#step_circle_3").attr("class","step_circle lit"),$("#step_bar_3").attr("class","step_bar lit"),$("#step_circle_4").attr("class","step_circle lit"),31==find_doctor_page)find_doctor_page=32,$("#find_doctor_label").text("Select Time"),resetDateTimeSelector(),$("#find_doctor_appointment_2").fadeOut(300,function(){$("#find_doctor_time").fadeIn(300)});else{find_doctor_page=12;var a=selected_doctor_info.split("_"),i='<ul style="color: #22AEFF; margin-top: 50px; margin-left: 120px;"><li style="text-align: left;">Receipt: <strong>HTI - CR102388</strong></li><li style="text-align: left;"><strong>';i+=1==consultation_type?"Video ":"Phone ",i+='Consultation</strong></li><li style="text-align: left;">With Dr. <strong>'+a[3]+" "+a[4]+'</strong></li><li style="text-align: left;">starting <strong>NOW</strong></li></ul></div>',$("#find_doctor_receipt").html(i),$("#find_doctor_confirmation").html('<p style="color: #22AEFF; margin-top: 50px;"><strong>Thank you!</strong><br/><strong>Your consultation appointment is confirmed and will start IMMEDIATELY.</strong></p></div>'),$("#find_doctor_label").text("Confirmation"),$("#find_doctor_appointment_2").fadeOut(300,function(){$("#find_doctor_receipt").fadeIn(300)}),$("#step_bar_4").attr("class","step_bar lit"),$("#step_circle_5").attr("class","step_circle lit")}})}else{find_doctor_page=31==find_doctor_page?35:15;var s="";"th"==language?s="Lo siento, no hemos podido encontrar ningún</br>médico general en tu area.":"en"==language&&(s="Sorry, we could not find any<br/>general practicioners in your area."),$("#not_found_text").html(s),$("#find_doctor_appointment_2").fadeOut(300,function(){$("#find_doctor_appointment_3").fadeIn(300)}),$("#find_doctor_next_button").css("display","none")}})}),$("#8_10_am").live("click",function(){$(this).hasClass("slot_disabled")||(time_selected=1,selected_timezone=zones[0],$("#time_selector_1").css("display","block"),$("#time_selector_1").css("margin-top","10px"),selectTime("8_10_am"))}),$("#10_12").live("click",function(){$(this).hasClass("slot_disabled")||(time_selected=2,selected_timezone=zones[1],$("#time_selector_1").css("display","block"),$("#time_selector_1").css("margin-top","42px"),selectTime("10_12"))}),$("#12_2").live("click",function(){$(this).hasClass("slot_disabled")||(time_selected=3,selected_timezone=zones[2],$("#time_selector_1").css("display","block"),$("#time_selector_1").css("margin-top","74px"),selectTime("12_2"))}),$("#2_4").live("click",function(){$(this).hasClass("slot_disabled")||(time_selected=4,selected_timezone=zones[3],$("#time_selector_1").css("display","block"),$("#time_selector_1").css("margin-top","106px"),selectTime("2_4"))}),$("#4_6").live("click",function(){$(this).hasClass("slot_disabled")||(time_selected=5,selected_timezone=zones[4],$("#time_selector_1").css("display","block"),$("#time_selector_1").css("margin-top","138px"),selectTime("4_6"))}),$("#6_8").live("click",function(){$(this).hasClass("slot_disabled")||(time_selected=6,selected_timezone=zones[5],$("#time_selector_1").css("display","block"),$("#time_selector_1").css("margin-top","170px"),selectTime("6_8"))}),$("#8_10_pm").live("click",function(){$(this).hasClass("slot_disabled")||(time_selected=7,selected_timezone=zones[6],$("#time_selector_1").css("display","block"),$("#time_selector_1").css("margin-top","202px"),selectTime("8_10_pm"))}),$("#sun").live("click",function(){if(!$(this).hasClass("day_disabled")){day_selected=1,$("#day_selector_1").css("display","block"),$("#day_selector_1").css("margin-left","20px"),selectDay("sun");var e=$("#sun").children("input").eq(1).val().substr(1,$("#sun").children("input").eq(1).val().length-2).split(",");zones=$("#sun").children("input").eq(2).val().substr(1,$("#sun").children("input").eq(2).val().length-2).split(","),date_selected=$("#sun").children("input").eq(0).val(),disableAllSlots();for(var t=0;t<e.length;t++)"0"==e[t]?$("#8_10_am").removeClass("slot_disabled"):"1"==e[t]?$("#10_12").removeClass("slot_disabled"):"2"==e[t]?$("#12_2").removeClass("slot_disabled"):"3"==e[t]?$("#2_4").removeClass("slot_disabled"):"4"==e[t]?$("#4_6").removeClass("slot_disabled"):"5"==e[t]?$("#6_8").removeClass("slot_disabled"):"6"==e[t]&&$("#8_10_pm").removeClass("slot_disabled")}}),$("#mon").live("click",function(){if(!$(this).hasClass("day_disabled")){day_selected=2,$("#day_selector_1").css("display","block"),$("#day_selector_1").css("margin-left","68px"),selectDay("mon");var e=$("#mon").children("input").eq(1).val().substr(1,$("#mon").children("input").eq(1).val().length-2).split(",");zones=$("#mon").children("input").eq(2).val().substr(1,$("#mon").children("input").eq(2).val().length-2).split(","),date_selected=$("#mon").children("input").eq(0).val(),disableAllSlots();for(var t=0;t<e.length;t++)"0"==e[t]?$("#8_10_am").removeClass("slot_disabled"):"1"==e[t]?$("#10_12").removeClass("slot_disabled"):"2"==e[t]?$("#12_2").removeClass("slot_disabled"):"3"==e[t]?$("#2_4").removeClass("slot_disabled"):"4"==e[t]?$("#4_6").removeClass("slot_disabled"):"5"==e[t]?$("#6_8").removeClass("slot_disabled"):"6"==e[t]&&$("#8_10_pm").removeClass("slot_disabled")}}),$("#tues").live("click",function(){if(!$(this).hasClass("day_disabled")){day_selected=3,$("#day_selector_1").css("display","block"),$("#day_selector_1").css("margin-left","116px"),selectDay("tues");var e=$("#tues").children("input").eq(1).val().substr(1,$("#tues").children("input").eq(1).val().length-2).split(",");zones=$("#tues").children("input").eq(2).val().substr(1,$("#tues").children("input").eq(2).val().length-2).split(","),date_selected=$("#tues").children("input").eq(0).val(),disableAllSlots();for(var t=0;t<e.length;t++)"0"==e[t]?$("#8_10_am").removeClass("slot_disabled"):"1"==e[t]?$("#10_12").removeClass("slot_disabled"):"2"==e[t]?$("#12_2").removeClass("slot_disabled"):"3"==e[t]?$("#2_4").removeClass("slot_disabled"):"4"==e[t]?$("#4_6").removeClass("slot_disabled"):"5"==e[t]?$("#6_8").removeClass("slot_disabled"):"6"==e[t]&&$("#8_10_pm").removeClass("slot_disabled")}}),$("#wed").live("click",function(){if(!$(this).hasClass("day_disabled")){day_selected=4,$("#day_selector_1").css("display","block"),$("#day_selector_1").css("margin-left","164px"),selectDay("wed");var e=$("#wed").children("input").eq(1).val().substr(1,$("#wed").children("input").eq(1).val().length-2).split(",");zones=$("#wed").children("input").eq(2).val().substr(1,$("#wed").children("input").eq(2).val().length-2).split(","),date_selected=$("#wed").children("input").eq(0).val(),disableAllSlots();for(var t=0;t<e.length;t++)"0"==e[t]?$("#8_10_am").removeClass("slot_disabled"):"1"==e[t]?$("#10_12").removeClass("slot_disabled"):"2"==e[t]?$("#12_2").removeClass("slot_disabled"):"3"==e[t]?$("#2_4").removeClass("slot_disabled"):"4"==e[t]?$("#4_6").removeClass("slot_disabled"):"5"==e[t]?$("#6_8").removeClass("slot_disabled"):"6"==e[t]&&$("#8_10_pm").removeClass("slot_disabled")
}}),$("#thur").live("click",function(){if(!$(this).hasClass("day_disabled")){day_selected=5,$("#day_selector_1").css("display","block"),$("#day_selector_1").css("margin-left","212px"),selectDay("thur");var e=$("#thur").children("input").eq(1).val().substr(1,$("#thur").children("input").eq(1).val().length-2).split(",");zones=$("#thur").children("input").eq(2).val().substr(1,$("#thur").children("input").eq(2).val().length-2).split(","),date_selected=$("#thur").children("input").eq(0).val(),disableAllSlots();for(var t=0;t<e.length;t++)"0"==e[t]?$("#8_10_am").removeClass("slot_disabled"):"1"==e[t]?$("#10_12").removeClass("slot_disabled"):"2"==e[t]?$("#12_2").removeClass("slot_disabled"):"3"==e[t]?$("#2_4").removeClass("slot_disabled"):"4"==e[t]?$("#4_6").removeClass("slot_disabled"):"5"==e[t]?$("#6_8").removeClass("slot_disabled"):"6"==e[t]&&$("#8_10_pm").removeClass("slot_disabled")}}),$("#fri").live("click",function(){if(!$(this).hasClass("day_disabled")){day_selected=6,$("#day_selector_1").css("display","block"),$("#day_selector_1").css("margin-left","260px"),selectDay("fri");var e=$("#fri").children("input").eq(1).val().substr(1,$("#fri").children("input").eq(1).val().length-2).split(",");zones=$("#fri").children("input").eq(2).val().substr(1,$("#fri").children("input").eq(2).val().length-2).split(","),date_selected=$("#fri").children("input").eq(0).val(),disableAllSlots();for(var t=0;t<e.length;t++)"0"==e[t]?$("#8_10_am").removeClass("slot_disabled"):"1"==e[t]?$("#10_12").removeClass("slot_disabled"):"2"==e[t]?$("#12_2").removeClass("slot_disabled"):"3"==e[t]?$("#2_4").removeClass("slot_disabled"):"4"==e[t]?$("#4_6").removeClass("slot_disabled"):"5"==e[t]?$("#6_8").removeClass("slot_disabled"):"6"==e[t]&&$("#8_10_pm").removeClass("slot_disabled")}}),$("#sat").live("click",function(){if(!$(this).hasClass("day_disabled")){day_selected=7,$("#day_selector_1").css("display","block"),$("#day_selector_1").css("margin-left","308px"),selectDay("sat");var e=$("#sat").children("input").eq(1).val().substr(1,$("#sat").children("input").eq(1).val().length-2).split(",");zones=$("#sat").children("input").eq(2).val().substr(1,$("#sat").children("input").eq(2).val().length-2).split(","),date_selected=$("#sat").children("input").eq(0).val(),disableAllSlots();for(var t=0;t<e.length;t++)"0"==e[t]?$("#8_10_am").removeClass("slot_disabled"):"1"==e[t]?$("#10_12").removeClass("slot_disabled"):"2"==e[t]?$("#12_2").removeClass("slot_disabled"):"3"==e[t]?$("#2_4").removeClass("slot_disabled"):"4"==e[t]?$("#4_6").removeClass("slot_disabled"):"5"==e[t]?$("#6_8").removeClass("slot_disabled"):"6"==e[t]&&$("#8_10_pm").removeClass("slot_disabled")}}),$("#find_doctor_button").live("click",function(){if(doctor_to_connect.length>0||type_of_doctor_to_find.length>0){var e=doctor_to_connect.split("_");$.post("find_doctor.php",{type:type_of_doctor_to_find,id:e[0]},function(e){if("none"==e)$("#find_doctor_modal").dialog("option","title","No Doctors Found"),$("#Talk_Section_1").fadeOut("Slow",function(){$("#Talk_Section_3").fadeIn("slow")}),$("#find_doctor_modal").dialog("widget").animate({width:"550px",height:"130px"},{duration:500,step:function(){$("#dialog").dialog("option","position","center")}});else{var a=JSON.parse(e),s=a.name;s=s.replace("_"," "),doctor_to_connect=a.id+"_"+a.phone+"_"+a.name,$("#find_doctor_modal").dialog("option","title","Doctor "+s),$("#Talk_Section_1").fadeOut("Slow",function(){$("#Talk_Section_2").fadeIn("slow")}),$("#find_doctor_modal").dialog("widget").animate({width:"550px",height:"130px"},{duration:500,step:function(){$("#dialog").dialog("option","position","center")}})}})}}),$(".recent_doctor_button").live("click",function(){$(".recent_doctor_button_selected").attr("class","recent_doctor_button"),$(this).attr("class","recent_doctor_button_selected"),doctor_to_connect=$(this).attr("id"),type_of_doctor_to_find=""}),$("#speciality").change(function(){doctor_to_connect="",type_of_doctor_to_find=$(this).val()}),$("#phone_call_button").live("click",function(){var t=doctor_to_connect.split("_");$("#find_doctor_modal").dialog("option","title","Calling Doctor "+t[2]),$("#Talk_Section_2").fadeOut("Slow",function(){$("#Talk_Section_4").fadeIn("slow")}),$.post("start_telemed_phonecall.php",{pat_phone:$("#USERPHONE").val(),doc_phone:t[1],doc_id:t[0],pat_id:$("#USERID").val(),doc_name:t[2]+" "+t[3],pat_name:$("#USERNAME").val()+" "+$("#USERSURNAME").val()},function(e){console.log(e)})}),$("#video_call_button").live("click",function(){$("#find_doctor_modal").dialog("close");var t=doctor_to_connect.split("_");$.post("start_telemed_videocall.php",{pat_phone:$("#USERPHONE").val(),doc_phone:t[1],doc_id:t[0],pat_id:$("#USERID").val(),doc_name:t[2]+" "+t[3],pat_name:$("#USERNAME").val()+" "+$("#USERSURNAME").val()},function(e){if(console.log(e),1==e){var a=doctor_to_connect.split("_");window.open("telemedicine_patient.php?MED="+a[0]+"&PAT="+$("#USERID").val(),"Telemedicine","height=650,width=700,left=100,top=100,resizable=yes,scrollbars=yes,toolbar=yes,menubar=no,location=no,directories=no,status=yes")}else alert("There was an error. Please try again later")})}),$("#compose_message").live("click",function(){$("#messagecontent_inbox").attr("value",""),$("#ToDoctor").attr("value","To: "),$("#subjectname_inbox").attr("value",""),$("#subjectname_inbox").removeAttr("readonly"),$("#messagedetails").hide(),$("#replymessage").show(),$("#attachments").empty(),$("#attachments").hide(),$("#Reply").hide(),$("#CloseMessage").hide(),$("#Attach").hide(),$("#sendmessages_inbox").show(),$("#attachreports").show(),$("#message_modal").trigger("click")}),$("#sendmessages_inbox").live("click",function(){{var e=session_userid;$("#NombreComp").html()}l=$("#IdDoctor").attr("value");var a=$("#messagecontent_inbox").val(),s=$("#subjectname_inbox").val(),i=l,l=l;reportids=" ";var n="sendMessageUSER.php?sender="+i+"&receiver="+l+"&patient="+e+"&content="+a+"&subject="+s+"&attachments="+reportids+"&connection_id=0&tofrom=to",r=LanzaAjax(n);$("#messagecontent_inbox").attr("value",""),$("#subjectname_inbox").attr("value",""),displaynotification("status",r),getUserData(e);var c=user[0].Name,_=user[0].Surname;getMedCreator(l);var n=(doctor[0].Name,doctor[0].Surname,"push_serverUSER.php?FromDoctorName="+c+"&FromDoctorSurname="+_+"&FromDoctorId="+l+"&Patientname="+c+"&PatientSurname="+_+"&IdUsu="+e+"&message= New Message <br>From: "+c+" "+_+" <br>Subject: "+s.replace(/RE:/,"")+"&NotifType=1&channel="+l+"&Selector=2"),r=LanzaAjax(n);reportids="",$("#attachment_icon").remove(),$("#message_modal").trigger("click")}),$(".CFILA").live("click",function(){var e=$(this).attr("id"),t="getDoctorMessage.php?msgid="+e,a=LanzaAjax(t),s=a.indexOf(","),i=a.substr(0,s),l=a.substr(s+1,a.length);m=l.indexOf(",");var o=l.substr(0,m),n=l.substr(m+1,l.length);$("#IdDoctor").attr("value",i),$('input[type=checkbox][id^="reportcol"]').each(function(){$('input[type=checkbox][id^="reportcol"]').checked=!1}),reportcheck.length=0;var r=$(this).find("span#"+e).text().replace(/br8k/g,"\n").replace(/sp0e/g," ");$(this).find("span").hide();var c=$(this).find("ul#"+e).text();if($("#attachments").empty(),c){var d="0",p=$("#userId").val(),f=$("#MEDID").val(),u="CreateAttachmentStream.php?ElementDOM=na&EntryTypegroup="+d+"&Usuario="+p+"&MedID="+f+"&Reports="+c,a=LanzaAjax(u);$("#attachments").append(a),$("#attachments").show()}else $("#attachments").hide();$("#Attach").hide(),$("#messagedetails").show(),$("#ToDoctor").show(),$("#ToDoctor").html("To: "+o+" "+n),$("#replymessage").hide(),$("#Reply").attr("value","Reply"),$("#Reply").show(),$("#CloseMessage").show(),$("#messagedetails").val(r),$("#messagedetails").attr("readonly","readonly"),$("#messagedetails,#subjectname_inbox").css("cursor","pointer"),$("#subjectname_inbox").val($(this).find("a").text()),$("#subjectname_inbox").attr("readonly","readonly"),$("#replymessage").hide(),$("#sendmessages_inbox").hide(),$("#attachreports").hide(),$("#message_modal").trigger("click");var t="setMessageStatusUSER.php?msgid="+e,a=LanzaAjax(t)}),$(".CFILA_out").live("click",function(){var e=$(this).attr("id");$('input[type=checkbox][id^="reportcol"]').each(function(){$('input[type=checkbox][id^="reportcol"]').checked=!1}),reportcheck.length=0;var t=$(this).find("span#"+e).text().replace(/br8k/g,"\n").replace(/sp0e/g," ");$(this).find("span").hide();var a=$(this).find("ul#"+e).text();if($("#attachments").empty(),a){var i="0",l=$("#userId").val(),o=$("#MEDID").val(),n="CreateAttachmentStream.php?ElementDOM=na&EntryTypegroup="+i+"&Usuario="+l+"&MedID="+o+"&Reports="+a,r=LanzaAjax(n);$("#attachments").append(r),$("#attachments").show()}else $("#attachments").hide();$("#Attach").hide(),$("#messagedetails").show(),$("#replymessage").hide(),$("#Reply").attr("value","Reply"),$("#Reply").hide(),$("#CloseMessage").show(),$("#messagedetails").val(t),$("#messagedetails").attr("readonly","readonly"),$("#messagedetails,#subjectname_inbox").css("cursor","pointer"),$("#subjectname_inbox").val($(this).find("a").text()),$("#subjectname_inbox").attr("readonly","readonly"),$("#replymessage").hide(),$("#sendmessages_inbox").hide(),$("#attachreports").hide(),$("#message_modal").trigger("click")}),$("#Attach").live("click",function(){reportids="",$('input[type=checkbox][id^="reportcol"]').each(function(){var e=this.checked?"1":"0";if(1==e){var t=$(this).parents("div.attachments").attr("id");reportcheck.push(this.id),reportids=reportids+t+" "}});var e=!1;if(reportids>""&&(e=confirm("Confirm Attachments")),e)$("#Reply").trigger("click"),$("#attachreportdiv").append('<i id="attachment_icon" class="icon-paper-clip" style="margin-left:10px"></i>');else{for(reportids="",i=0;i<reportcheck.length;i++)document.getElementById(reportcheck[i]).checked=!1;reportcheck.length=0,$("#Reply").trigger("click")}});var isloaded=!1;$("#attachreports").live("click",function(){$('input[type=checkbox][id^="reportcol"]').each(function(){var e=this.checked?"1":"0";1==e&&reportcheck.push(this.id)}),$("#attachments").empty(),createPatientReports(),setTimeout(function(){for(i=0;i<reportcheck.length;i++)document.getElementById(reportcheck[i]).checked=!0},400),$("#attachment_icon").remove(),$("#sendmessages_inbox").hide(),$("#replymessage").hide(),$(this).hide(),$("#attachments").show(),$("#Attach").show(),$("#Reply").attr("value","Back"),$("#Reply").show()}),$("#Reply").live("click",function(){var e="RE:"+$("#subjectname_inbox").val().replace(/RE:/,"");$("#ToDoctor").show(),$("#ToDoctor").attr("value","To: "),$("#subjectname_inbox").val(e),$("#messagedetails").hide(),$("#replymessage").show(),$("#attachments").hide(),$("#Attach").hide(),$(this).hide(),$("#CloseMessage").hide(),$("#sendmessages_inbox").show(),$("#attachreports").show()}),$("#SearchUser").typeWatch({captureLength:1,callback:function(){$("#BotonBusquedaPac").trigger("click")}}),$("#RetrievePatient").click(function(){$("#BotonBusquedaPac").trigger("click")}),$("#BotonBusquedaPac").click(function(){var t=$("#MEDID").val(),a=$("#SearchUser").val(),s=0;s=$("#RetrievePatient").is(":checked")?1:1,""===a&&(a=-111);var i="getFullUsersMED.php?Usuario="+a+"&IdMed="+t+"&Usuario="+a+"&Group="+s;$("#TablaPac").load(i),$("#TablaPac").trigger("update")}),$("#BotonBusquedaPacCOMP").click(function(){var a=$("#SearchUserYCOMP").val(),s="<?php echo $domain;?>/getpines.php?Usuario="+a;getLifePines(s);var i=Object.keys(pines).length,l="getFullUsers.php?Usuario="+a+"&NReports="+i;$("#TablaPacCOMP").load(l),$("#TablaPacCOMP").trigger("update")}),$("#BotPassbook").live("click",function(){$("#modalContents").dialog({bgiframe:!0,height:1e3,height:340,modal:!0})}),$("#ButtonSkype").live("click",function(){$("#modalContents").dialog("close")}),$("#ButtonWeemo").live("click",function(){$.ajax({url:"<?php echo $domain?>/weemo_test.php?calleeID=<?php echo $DoctorEmail;?>",method:"get",success:function(data){var htmlContent=data,e=document.createElement("div");e.setAttribute("style","display: none;"),e.innerHTML=htmlContent,document.body.appendChild(e),eval(document.getElementById("runscript").innerHTML)}}),$("#modalContents").dialog("close")}),$("#telemedicine").live("click",function(){$("#modalContents").dialog({bgiframe:!0,height:140,modal:!0})}),$("#TablaPacCOMP").bind("click",function(){alert($(this).text())}),$("#datatable_1").dataTable({bProcessing:!0,bDestroy:!0,bRetrieve:!0,sAjaxSource:"getBLOCKS.php"}),$("#Wait1").hide().ajaxStart(function(){$(this).show()}).ajaxStop(function(){$(this).hide()}),$("#datatable_1 tbody").click(function(){alert($("td:eq(0) span",this).html())}),window.onload=function(){{var e=$("#quePorcentaje").val();new JustGage({id:"gauge",value:e,min:0,max:100,title:" ",label:"% Refered to me"})}},$("#Send2Doc").on("click",function(){$("#modal_send").dialog({bigframe:!0,width:400,height:200,modal:!1})}),$("#CaptureEmail2Send2Doc").on("click",function(){var e=$("#EmailID").val(),t=session_userid;$.get("ValidateSendEmailDoc.php?emailId="+e+"&user="+t,function(e){console.log(e)}),$("#modal_send").dialog("close")}),$("#Request").on("click",function(){$("#modal_request").dialog({bigframe:!0,width:550,height:300,modal:!1})}),$("#CaptureEmail2Request2Doc").on("click",function(){var e=$("#EmailIDRequestPage").val(),t="'"+$("#MessageForDoctor").val()+"'",a=session_userid;$.get("RequestReportsFromExternalDoc.php?emailId="+e+"&user="+a+"&message="+t,function(){}),$("#modal_request").dialog("close")}),$("#PHSLabel").trigger("click")});