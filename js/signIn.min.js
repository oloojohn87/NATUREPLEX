$(document).ready(function(){function r(e,a){if(a.error){console.log("There was an error with the credit card");var o="There was a problem with the credit card information.";alert(o)}else{{a.id}$("#CreditCardToken").val(a.id),console.log("Card Token: "+$("#CreditCardToken").val()),$("#FormSU").submit()}}function _(e){setTimeout(function(){if($("#ContenidoModal2").hide(),$("#Proceed").hide(),$("#CloseModal2").show(),0==e)M("Patient not found in database. Please try with another email address.");else if(e>1)M("More than one user for that email address. Please contact health2.me support.");else{var a="ResetUserPac.php?email="+i,o=O(a);M(o)}},50)}function w(e){var a=/^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;return a.test(e)&&""!=e?!0:!1}function y(e,a,o){var r=$(o).val(),i=r,l=1;if(!F(r)){var t="Value not numeric";C(t,o),i="",l=0,$("#ValorGlobal").val("-1"),P(o)}if(r>a){var t="Value too high";C(t,o),i="",l=0,$("#ValorGlobal").val("-1"),P(o)}if(e>r){var t="Value too low";C(t,o),i="",l=0,$("#ValorGlobal").val("-1"),P(o)}1==l&&(C("",o),$("#ValorGlobal").val("0")),$(o).val(i)}function k(e,a){var o=$(a).val(),r=o,i=1;if(e>10)switch(e){case 11:if(o.length<8){var l="Value must be at least 8 characters long";C(l,a),r="",i=0,$("#ValorGlobal").val("-1"),P(a)}break;case 12:if(o.length<2){var l="Value must be at least 2 characters long";C(l,a),r="",i=0,$("#ValorGlobal").val("-1"),P(a)}break;case 13:if(o.length<6){var l="Value must be at least 6 characters long";C(l,a),r="",i=0,$("#ValorGlobal").val("-1"),P(a)}break;case 14:var t=O("CheckPrivateCode.php?code="+o);if("false"==t){var l="Invalid Access Code";C(l,a),r="",i=0,$("#ValorGlobal").val("-1"),P(a)}break;case 15:if(0==w(o)){var l="Value must be a valid email format";C(l,a),r="",i=0,$("#ValorGlobal").val("-1"),P(a)}break;default:var l="Unknown error";C(l,a),r="",i=0,$("#ValorGlobal").val("-1")}1==i&&(C("",a),$("#ValorGlobal").val("0")),$(a).val(r)}function G(e,a){var o=$(e).val(),r=$(a).val();if(o!=r){var i="Values must be the same";C(i,e),C(i,a),P(e),P(a),quevalor="",$("#ValorGlobal").val("-1"),P(selector)}else C("",e),C("",a),$("#ValorGlobal").val("0")}function P(e){$(e).css("border","2px solid rgb(232, 58, 60)")}function I(e){$(e).css("border","")}function O(e){var a="SIN MODIFICACIÃ“N";return $.ajax({url:e,dataType:"html",async:!1,complete:function(){},success:function(e){"string"==typeof e&&(a=e)}}),a}function C(e,a){$("#error_msg").html(""),$("#close_error_bar").show(),"464"==a&&$("#error_bar").css("background-color","#0590d0"),""==e||($("#error_msg").html('<p style="font-size:18px; color:white;text-align:center">'+e+"</p>"),"464"==a&&$("#close_error_bar").hide(),$("#error_bar").fadeIn("slow"),$("#error_bar").fadeOut(2e3),$("html,body").animate({scrollTop:$("#error_bar").offset().top},"slow"))}function M(e){if(""==e)var a="0px";else var a="60px";$(".MsgStatus2").animate({height:a},500,function(){$(".MsgStatus2").html('<p style="font-size:18px; color:white; margin:10px; top:10px; position:relative;">'+e+"</p>")})}function S(){var e=$("#Year").val(),a=$("#Month").val(),o=$("#Day").val(),r=e+N(a,2)+N(o,2),i=T($("#Gender").is(":checked")),i=$("#Gender").val(),l=$("#OrderOB").val();0==i&&(i="0"),0==l&&(l="0");var t=r+i+l;$("#VIdUsFIXED").html(t),$("#VIdUsFIXED2").html(t),$("#VIdUsFIXEDINSERT").val(t)}function E(){var e=$("#Vname").val().toLowerCase().replace(".","").replace(" ",""),a=$("#Vsurname").val().toLowerCase().replace(".","").replace(" ",""),o=e+"."+a;$("#VIdUsFIXEDNAME").html(o),$("#VIdUsFIXEDNAME2").html(o),$("#VIdUsFIXEDNAMEINSERT").val(o)}function T(e){return e?1:0}function F(e){return!isNaN(e)}function N(e,a){for(var o=""+e;o.length<a;)o="0"+o;return o}var e=0;Stripe.setPublishableKey("pk_test_YBtrxG7xwZU9RO1VY8SeaEe9");var a=$.cookie("inmers_hti");"main"==a&&$('link[rel=stylesheet][href="css/loginCol.css"]').remove(),$.browser.msie&&window.open("ie_error.html","_self",!1),$(".tooltip").tooltipster(),$("#Year,#Month, #Day, #Gender, #OrderOB,#Vname,#Vsurname,#XPassword,#XPassword2,#email,#phone,#accesscode").bind("focusin",function(){I($(this))}),$("#Year").bind("focusout",function(){y(1900,2020,$(this)),S()}),$("#Month").bind("focusout",function(){y(1,12,$(this)),S()}),$("#Day").bind("focusout",function(){y(1,31,$(this)),S()}),$("#Gender").bind("focusout change",function(){var e=$("#Gender").val();"0"!=e&&"1"!=e?C("Please select appropriate gender","#Gender"):C("","#Gender"),S()}),$("#OrderOB").bind("focusout",function(){y(0,5,$(this)),S()}),$("#Vname").bind("focus",function(){var e=$("#Gender").val();return"0"!=e&&"1"!=e&&C("Please select appropriate gender","#Gender"),"abc"}),$("#Vname").bind("focusout",function(){k(12,$(this)),E()}),$("#Vsurname").bind("focusout",function(){k(12,$(this)),E()}),$("#XPassword").bind("focusout",function(){k(11,$(this))}),$("#XPassword2").bind("focusout",function(){G("#XPassword","#XPassword2"),k(11,$(this))}),$("#email").bind("focusout",function(){$("#IDRESERV").html($(this).val()),k(15,$(this))}),$("#accesscode").bind("focusout",function(){k(14,$(this))}),$("#phone").intlTelInput(),$("#phone").bind("focusout",function(){0==$("#phone").intlTelInput("isValidNumber")?(C("Invalid Phone Number","#phone"),$("#ValorGlobal").val("-1")):($("#phone").val($("#phone").val().replace(/\s+/g,"")),$("#ValorGlobal").val("0"))});var o=0;$('input[type=checkbox][id^="checkcol_terms"]').live("click",function(){$(this).is(":checked")?(o=1,C("You have read and agree to the terms of service and privacy policy","464")):o=0}),$(".to_register").bind("click",function(){var e=$.cookie("inmers_hti");"col"==e&&(url="http://www.hellodoctor.us/register",window.location.assign(url))}),$("#BotonEnviaF").bind("click",function(){var a=0,i=0;if($("#Year").trigger("focusout"),a=$("#ValorGlobal").val(),0!=a&&(i=1),0!=a&&($("#Month").trigger("focusout"),a=$("#ValorGlobal").val(),0!=a&&(i=1)),0!=a&&($("#Day").trigger("focusout"),a=$("#ValorGlobal").val(),0!=a&&(i=1)),0!=a&&($("#Gender").trigger("focusout"),a=$("#ValorGlobal").val(),0!=a&&(i=1)),0!=a&&($("#OrderOB").trigger("focusout"),a=$("#ValorGlobal").val(),0!=a&&(i=1)),0!=a&&($("#Vname").trigger("focusout"),a=$("#ValorGlobal").val(),0!=a&&(i=1)),0!=a&&($("#Vsurname").trigger("focusout"),a=$("#ValorGlobal").val(),0!=a&&(i=1)),0!=a&&($("#XPassword2").trigger("focusout"),a=$("#ValorGlobal").val(),0!=a&&(i=1)),0!=a&&($("#XPassword").trigger("focusout"),a=$("#ValorGlobal").val(),0!=a&&(i=1)),0!=a&&($("#email").trigger("focusout"),a=$("#ValorGlobal").val(),0!=a&&(i=1)),0!=a&&($("#phone").trigger("focusout"),a=$("#ValorGlobal").val(),0!=a&&(i=1)),0!=a&&($("#accesscode").trigger("focusout"),a=$("#ValorGlobal").val(),0!=a&&(i=1)),1!=i)if(0==o)alert("Please read the terms & privacy policy agreement and click the checkbox to finalise your account creation process with Health2Me","");else if(console.log(e),0!=e){var l=$("#credit_card_exp_date").val().split("-");Stripe.card.createToken({number:$("#credit_card_number").val(),cvc:$("#credit_card_cvc").val(),exp_month:l[1],exp_year:l[0]},r)}else $("#FormSU").submit(),setTimeout(function(){},1e3)}),$("#GrabaDatos").bind("click",function(){$("#FormSU").method="post",$("#FormSU").submit()}),$("#SignIn").bind("click",function(){$("#spin-icon").show();setTimeout(function(){$.post("validateloginUSER.php",{Nombre:$("#Nombre").val(),Password:$("#loginPass").val()}).done(function(e){$("#spin-icon").hide(),"1"==e?($("#FormLOGIN").method="post",$("#FormLOGIN").submit()):$("#login_user").effect("shake",{distance:60},90)})},500)}),$("#Nombre,#loginPass").keypress(function(e){var a=e.which;return 13==a?($("#SignIn").trigger("click"),!1):void 0}),$("#ForgotPassword").bind("click",function(){$(".MsgStatus2").html(""),$(".MsgStatus2").height(0),$("#ContenidoModal2").show(),$("#Proceed").show(),$("#CloseModal2").hide(),$("#ContenidoModal2").html('<p>Please enter your email to reset password:</p><p><span><input id="ResPas" name="ResPas" type="text" class="last-input" placeholder="email" title="Please insert your email" style="padding-left:10px; margin-top:5px;" /></span><span id="icon_ok" style="margin-left:25px;color:#58b820;display:none;"><span style="margin-right:10px">Email Found</span><i class="icon-ok-circle icon-2x"></i></span><span id="icon_error" style="margin-left:25px;color:#f54f4f;display:none;"><span style="margin-right:10px">Invalid Email</span><i class="icon-remove-circle icon-2x"></i></span></p>'),$("#BotonMod2").trigger("click")});var i="",l="",t="",n="",s="",c="",u="",f="",d="",v="",p="",h="",m="",g="";$("#Proceed").bind("click",function(){i=$("#ResPas").val();var e="CheckPrevio2Pac.php?valor="+i+"&queTipo=1";l=O(e),t=l.indexOf("#"),n=l.substr(t+1),s=l.substr(0,t),c=n.indexOf("#"),u=n.substr(c+1),f=n.substr(0,c),d=u.indexOf("#"),v=u.substr(d+1),p=u.substr(0,d),h=v.indexOf("#"),m=v.substr(h+1),g=v.substr(0,h),0==s?($("#icon_error").show(),setTimeout(function(){_(s)},800)):s>1?($("#icon_error").show(),setTimeout(function(){_(s)},800)):($("#icon_ok").show(),_(s))}),$("#wrapper_user a").on("click",function(){"#toplan"==$(this).attr("href")?(console.log("Go to plan"),$("#login_user").animate({marginLeft:"-500px",opacity:"0.0"},{duration:400,easing:"easeInOutQuad",complete:function(){$("#login_user").css("margin-left","300px"),$("#login_user").css("display","none")}}),$("#plan").css("display","block"),$("#plan").animate({opacity:"1.0"},{duration:400,easing:"easeInOutQuad"})):"#toregister"==$(this).attr("href")?(console.log("Go to register"),$("#plan").animate({marginLeft:"-500px",opacity:"0.0"},{duration:400,easing:"easeInOutQuad",complete:function(){$("#plan").css("margin-left","0px"),$("#plan").css("display","none")}}),$("#register_user").css("display","block"),$("#register_user").animate({opacity:"1.0"},{duration:400,easing:"easeInOutQuad"})):"#tologin"==$(this).attr("href")&&(console.log("Go to login"),$("#register_user").animate({marginLeft:"-500px",opacity:"0.0"},{duration:400,easing:"easeInOutQuad",complete:function(){$("#register_user").css("margin-left","300px"),$("#register_user").css("display","none")}}),$("#login_user").css("display","block"),$("#login_user").animate({opacity:"1.0"},{duration:400,easing:"easeInOutQuad"}))}),$("#plan a").on("click",function(){"free_plan"==$(this).attr("id")?(console.log("free plan selected"),$("#billing_section").css("display","none"),e=0):"premium_plan"==$(this).attr("id")?(console.log("premium plan selected"),$("#billing_section").css("display","block"),e=1,$("#Plan").val(1)):"family_plan"==$(this).attr("id")&&(console.log("family plan selected"),$("#billing_section").css("display","block"),e=2),$("#PlanValue").val(e),console.log($("#PlanValue").val())}),$("#Wait1").hide().ajaxStart(function(){$("#Wait1").show(),$(this).show()}).ajaxStop(function(){$(this).hide()}),$("#close_error_bar").bind("click",function(){})});